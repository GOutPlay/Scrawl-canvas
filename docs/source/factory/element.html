<!DOCTYPE html>

<html>
<head>
  <title>Element factory</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="../../demo/canvas-001.html">
                  ./demo/canvas-001.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-002.html">
                  ./demo/canvas-002.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-003.html">
                  ./demo/canvas-003.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-004.html">
                  ./demo/canvas-004.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-005.html">
                  ./demo/canvas-005.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-006.html">
                  ./demo/canvas-006.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-007.html">
                  ./demo/canvas-007.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-008.html">
                  ./demo/canvas-008.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-009.html">
                  ./demo/canvas-009.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-010.html">
                  ./demo/canvas-010.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-011.html">
                  ./demo/canvas-011.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-012.html">
                  ./demo/canvas-012.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-013.html">
                  ./demo/canvas-013.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-014.html">
                  ./demo/canvas-014.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-015.html">
                  ./demo/canvas-015.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-016.html">
                  ./demo/canvas-016.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-017.html">
                  ./demo/canvas-017.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-018.html">
                  ./demo/canvas-018.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-019.html">
                  ./demo/canvas-019.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-020.html">
                  ./demo/canvas-020.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-021.html">
                  ./demo/canvas-021.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-022.html">
                  ./demo/canvas-022.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-023.html">
                  ./demo/canvas-023.js
                </a>
              
                
                <a class="source" href="../../demo/canvas-024.html">
                  ./demo/canvas-024.js
                </a>
              
                
                <a class="source" href="../../demo/component-001.html">
                  ./demo/component-001.js
                </a>
              
                
                <a class="source" href="../../demo/component-002.html">
                  ./demo/component-002.js
                </a>
              
                
                <a class="source" href="../../demo/component-003.html">
                  ./demo/component-003.js
                </a>
              
                
                <a class="source" href="../../demo/component-004.html">
                  ./demo/component-004.js
                </a>
              
                
                <a class="source" href="../../demo/components/test-001.html">
                  ./demo/components/test-001.js
                </a>
              
                
                <a class="source" href="../../demo/components/test-002.html">
                  ./demo/components/test-002.js
                </a>
              
                
                <a class="source" href="../../demo/core-001.html">
                  ./demo/core-001.js
                </a>
              
                
                <a class="source" href="../../demo/dom-001.html">
                  ./demo/dom-001.js
                </a>
              
                
                <a class="source" href="../../demo/dom-002.html">
                  ./demo/dom-002.js
                </a>
              
                
                <a class="source" href="../../demo/dom-003.html">
                  ./demo/dom-003.js
                </a>
              
                
                <a class="source" href="../../demo/dom-004.html">
                  ./demo/dom-004.js
                </a>
              
                
                <a class="source" href="../../demo/dom-005.html">
                  ./demo/dom-005.js
                </a>
              
                
                <a class="source" href="../../demo/dom-006.html">
                  ./demo/dom-006.js
                </a>
              
                
                <a class="source" href="../../demo/dom-007.html">
                  ./demo/dom-007.js
                </a>
              
                
                <a class="source" href="../../demo/dom-008.html">
                  ./demo/dom-008.js
                </a>
              
                
                <a class="source" href="../../demo/dom-009.html">
                  ./demo/dom-009.js
                </a>
              
                
                <a class="source" href="../../demo/dom-010.html">
                  ./demo/dom-010.js
                </a>
              
                
                <a class="source" href="../../demo/dom-011.html">
                  ./demo/dom-011.js
                </a>
              
                
                <a class="source" href="../../demo/dom-012.html">
                  ./demo/dom-012.js
                </a>
              
                
                <a class="source" href="../../demo/dom-013.html">
                  ./demo/dom-013.js
                </a>
              
                
                <a class="source" href="../../demo/dom-014a.html">
                  ./demo/dom-014a.js
                </a>
              
                
                <a class="source" href="../../demo/dom-014b.html">
                  ./demo/dom-014b.js
                </a>
              
                
                <a class="source" href="../../demo/dom-014c.html">
                  ./demo/dom-014c.js
                </a>
              
                
                <a class="source" href="../../demo/dom-015.html">
                  ./demo/dom-015.js
                </a>
              
                
                <a class="source" href="../core/animationloop.html">
                  ./source/core/animationloop.js
                </a>
              
                
                <a class="source" href="../core/document.html">
                  ./source/core/document.js
                </a>
              
                
                <a class="source" href="../core/init.html">
                  ./source/core/init.js
                </a>
              
                
                <a class="source" href="../core/library.html">
                  ./source/core/library.js
                </a>
              
                
                <a class="source" href="../core/userInteraction.html">
                  ./source/core/userInteraction.js
                </a>
              
                
                <a class="source" href="../core/utilities.html">
                  ./source/core/utilities.js
                </a>
              
                
                <a class="source" href="action.html">
                  ./source/factory/action.js
                </a>
              
                
                <a class="source" href="anchor.html">
                  ./source/factory/anchor.js
                </a>
              
                
                <a class="source" href="animation.html">
                  ./source/factory/animation.js
                </a>
              
                
                <a class="source" href="block.html">
                  ./source/factory/block.js
                </a>
              
                
                <a class="source" href="canvas.html">
                  ./source/factory/canvas.js
                </a>
              
                
                <a class="source" href="cell.html">
                  ./source/factory/cell.js
                </a>
              
                
                <a class="source" href="color.html">
                  ./source/factory/color.js
                </a>
              
                
                <a class="source" href="coordinate.html">
                  ./source/factory/coordinate.js
                </a>
              
                
                <a class="source" href="element.html">
                  ./source/factory/element.js
                </a>
              
                
                <a class="source" href="filter.html">
                  ./source/factory/filter.js
                </a>
              
                
                <a class="source" href="fontAttributes.html">
                  ./source/factory/fontAttributes.js
                </a>
              
                
                <a class="source" href="gradient.html">
                  ./source/factory/gradient.js
                </a>
              
                
                <a class="source" href="grid.html">
                  ./source/factory/grid.js
                </a>
              
                
                <a class="source" href="group.html">
                  ./source/factory/group.js
                </a>
              
                
                <a class="source" href="imageAsset.html">
                  ./source/factory/imageAsset.js
                </a>
              
                
                <a class="source" href="loom.html">
                  ./source/factory/loom.js
                </a>
              
                
                <a class="source" href="palette.html">
                  ./source/factory/palette.js
                </a>
              
                
                <a class="source" href="pattern.html">
                  ./source/factory/pattern.js
                </a>
              
                
                <a class="source" href="phrase.html">
                  ./source/factory/phrase.js
                </a>
              
                
                <a class="source" href="picture.html">
                  ./source/factory/picture.js
                </a>
              
                
                <a class="source" href="quaternion.html">
                  ./source/factory/quaternion.js
                </a>
              
                
                <a class="source" href="radialGradient.html">
                  ./source/factory/radialGradient.js
                </a>
              
                
                <a class="source" href="shape.html">
                  ./source/factory/shape.js
                </a>
              
                
                <a class="source" href="spriteAsset.html">
                  ./source/factory/spriteAsset.js
                </a>
              
                
                <a class="source" href="stack.html">
                  ./source/factory/stack.js
                </a>
              
                
                <a class="source" href="state.html">
                  ./source/factory/state.js
                </a>
              
                
                <a class="source" href="ticker.html">
                  ./source/factory/ticker.js
                </a>
              
                
                <a class="source" href="tween.html">
                  ./source/factory/tween.js
                </a>
              
                
                <a class="source" href="unstackedElement.html">
                  ./source/factory/unstackedElement.js
                </a>
              
                
                <a class="source" href="userObject.html">
                  ./source/factory/userObject.js
                </a>
              
                
                <a class="source" href="vector.html">
                  ./source/factory/vector.js
                </a>
              
                
                <a class="source" href="videoAsset.html">
                  ./source/factory/videoAsset.js
                </a>
              
                
                <a class="source" href="wheel.html">
                  ./source/factory/wheel.js
                </a>
              
                
                <a class="source" href="../mixin/anchor.html">
                  ./source/mixin/anchor.js
                </a>
              
                
                <a class="source" href="../mixin/asset.html">
                  ./source/mixin/asset.js
                </a>
              
                
                <a class="source" href="../mixin/assetConsumer.html">
                  ./source/mixin/assetConsumer.js
                </a>
              
                
                <a class="source" href="../mixin/base.html">
                  ./source/mixin/base.js
                </a>
              
                
                <a class="source" href="../mixin/cascade.html">
                  ./source/mixin/cascade.js
                </a>
              
                
                <a class="source" href="../mixin/dom.html">
                  ./source/mixin/dom.js
                </a>
              
                
                <a class="source" href="../mixin/entity.html">
                  ./source/mixin/entity.js
                </a>
              
                
                <a class="source" href="../mixin/filter.html">
                  ./source/mixin/filter.js
                </a>
              
                
                <a class="source" href="../mixin/position.html">
                  ./source/mixin/position.js
                </a>
              
                
                <a class="source" href="../mixin/shapePathCalculation.html">
                  ./source/mixin/shapePathCalculation.js
                </a>
              
                
                <a class="source" href="../mixin/styles.html">
                  ./source/mixin/styles.js
                </a>
              
                
                <a class="source" href="../mixin/tween.html">
                  ./source/mixin/tween.js
                </a>
              
                
                <a class="source" href="../scrawl.html">
                  ./source/scrawl.js
                </a>
              
                
                <a class="source" href="../worker/filter.html">
                  ./source/worker/filter.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1 id="element-factory">Element factory</h1>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h4 id="to-instantiate-objects-from-the-factory">To instantiate objects from the factory</h4>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h4 id="library-storage">Library storage</h4>

            </div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h4 id="clone-functionality">Clone functionality</h4>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h4 id="kill-functionality">Kill functionality</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> { group, element, elementnames, artefact, artefactnames, constructors } <span class="hljs-keyword">from</span> <span class="hljs-string">'../core/library.js'</span>;
<span class="hljs-keyword">import</span> { generateUuid, pushUnique, removeItem, xt, isa_obj, isa_dom, isa_boolean } <span class="hljs-keyword">from</span> <span class="hljs-string">'../core/utilities.js'</span>;
<span class="hljs-keyword">import</span> { uiSubscribedElements } <span class="hljs-keyword">from</span> <span class="hljs-string">'../core/userInteraction.js'</span>;

<span class="hljs-keyword">import</span> { makeCanvas } <span class="hljs-keyword">from</span> <span class="hljs-string">'./canvas.js'</span>;

<span class="hljs-keyword">import</span> baseMix <span class="hljs-keyword">from</span> <span class="hljs-string">'../mixin/base.js'</span>;
<span class="hljs-keyword">import</span> positionMix <span class="hljs-keyword">from</span> <span class="hljs-string">'../mixin/position.js'</span>;
<span class="hljs-keyword">import</span> anchorMix <span class="hljs-keyword">from</span> <span class="hljs-string">'../mixin/anchor.js'</span>;
<span class="hljs-keyword">import</span> domMix <span class="hljs-keyword">from</span> <span class="hljs-string">'../mixin/dom.js'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2 id="element-constructor">Element constructor</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> Element = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{
    
    <span class="hljs-keyword">let</span> el = items.domElement;

    <span class="hljs-keyword">this</span>.makeName(items.name);
    <span class="hljs-keyword">this</span>.register();

    <span class="hljs-keyword">if</span> (el) {</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Scrawl-canvas does not retain an Element’s textContent or innerHTML values internally. However these can be set on initialization, and subsequently, by using the attributes <strong>.text</strong> (for textContent, which automatically escapes all HTML-related tags and entities) and <strong>.content</strong> (which should respect HTML tags and entities) </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (items.text) el.textContent = items.text;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (items.content) el.innerHTML = items.content;
    }

    <span class="hljs-keyword">this</span>.initializePositions();
    <span class="hljs-keyword">this</span>.dimensions[<span class="hljs-number">0</span>] = <span class="hljs-keyword">this</span>.dimensions[<span class="hljs-number">1</span>] = <span class="hljs-number">100</span>;

    <span class="hljs-keyword">this</span>.pathCorners = [];
    <span class="hljs-keyword">this</span>.css = {};
    <span class="hljs-keyword">this</span>.here = {};

    <span class="hljs-keyword">this</span>.initializeDomLayout(items);

    <span class="hljs-keyword">this</span>.set(<span class="hljs-keyword">this</span>.defs);
    <span class="hljs-keyword">this</span>.set(items);

    el = <span class="hljs-keyword">this</span>.domElement;

    <span class="hljs-keyword">if</span> (el) {

        el.id = <span class="hljs-keyword">this</span>.name;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.trackHere) pushUnique(uiSubscribedElements, <span class="hljs-keyword">this</span>.name);
    }

    <span class="hljs-keyword">this</span>.apply();
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h2 id="element-object-prototype-setup">Element object prototype setup</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> P = Element.prototype = <span class="hljs-built_in">Object</span>.create(<span class="hljs-built_in">Object</span>.prototype);
P.type = <span class="hljs-string">'Element'</span>;
P.lib = <span class="hljs-string">'element'</span>;
P.isArtefact = <span class="hljs-literal">true</span>;
P.isAsset = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Apply mixins to prototype object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P = baseMix(P);
P = positionMix(P);
P = anchorMix(P);
P = domMix(P);</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2 id="define-getter-setter-and-deltasetter-functions">Define getter, setter and deltaSetter functions</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> S = P.setters;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>This is the preferred way to update an element’s text content because the text supplied in the argument is not treated as HTML by the browser. </p>

            </div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>When we update the DOM attribute <strong>element.textContent</strong>, it deletes any position-reporting corner divs we may have added to the element. Thus we need to repopulate the element with its ‘kids’ after updating the text</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.text = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">if</span> (isa_dom(<span class="hljs-keyword">this</span>.domElement)) {

        <span class="hljs-keyword">let</span> el = <span class="hljs-keyword">this</span>.domElement,
            kids = el.querySelectorAll(<span class="hljs-string">'[data-corner-div="sc"]'</span>);

        el.textContent = item;

        kids.forEach(<span class="hljs-function"><span class="hljs-params">kid</span> =&gt;</span> el.appendChild(kid));

        <span class="hljs-keyword">this</span>.dirtyContent = <span class="hljs-literal">true</span>;
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p><strong>WARNING - S.content is a dangerous function!</strong> It does not perform any character escaping before inserting the supplied argument into the element. Raw HTML (including, for instance, &lt;script&gt; tags) will be added to the DOM. It’s up to the coder to make sure this content is safe!</p>

            </div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>When we update the DOM attribute <strong>element.innerHTML</strong>, it deletes any position-reporting corner divs we may have added to the element. Thus we need to repopulate the element with its ‘kids’ after updating the text</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.content = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.domElement) {

        <span class="hljs-keyword">let</span> el = <span class="hljs-keyword">this</span>.domElement,
            kids = el.querySelectorAll(<span class="hljs-string">'[data-corner-div="sc"]'</span>);

        el.innerHTML = item;

        kids.forEach(<span class="hljs-function"><span class="hljs-params">kid</span> =&gt;</span> el.appendChild(kid));

        <span class="hljs-keyword">this</span>.dirtyContent = <span class="hljs-literal">true</span>;
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <h2 id="define-prototype-functions">Define prototype functions</h2>

            </div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.cleanDimensionsAdditionalActions = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">this</span>.dirtyDomDimensions = <span class="hljs-literal">true</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Removes the element’s wrapper from the Scrawl-canvas library.</p>

            </div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>If the function is invoked with an argument which resolves to true, the DOM element itself will also be removed from the web page.</p>

            </div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>This function will not remove references to the element in animations objects, including tweens and actions. Nor will it remove references to it in Group objects except for its current host stack’s group.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.demolish = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">removeFromDom = false</span>) </span>{

    <span class="hljs-keyword">let</span> el = <span class="hljs-keyword">this</span>.domElement,
        name = <span class="hljs-keyword">this</span>.name,
        g = <span class="hljs-keyword">this</span>.group;

    <span class="hljs-keyword">if</span> (g) g.removeArtefacts(name);

    <span class="hljs-keyword">if</span> (el &amp;&amp; removeFromDom) el.parentNode.removeChild(el);</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>also needs to remove itself from subscribe arrays in pivot, mimic, path artefacts</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pivot) removeItem(<span class="hljs-keyword">this</span>.pivot.pivoted, <span class="hljs-keyword">this</span>.name);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.path) removeItem(<span class="hljs-keyword">this</span>.path.pathed, <span class="hljs-keyword">this</span>.name);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.mimic) removeItem(<span class="hljs-keyword">this</span>.mimic.mimicked, <span class="hljs-keyword">this</span>.name);

    removeItem(uiSubscribedElements, name);

    <span class="hljs-keyword">delete</span> element[name];
    removeItem(elementnames, name);

    <span class="hljs-keyword">delete</span> artefact[name];
    removeItem(artefactnames, name);

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Adds a new &lt;canvas&gt; element to Scrawl-canvas stack immediately before this element, and sets up the canvas to mimic the element (meaning it will mimic changes to the element’s dimensions, positioning, scale and 3D rotational values)</p>

            </div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>The function can accept a Javascript object argument containing key:value pairs which will be used to set up the new canvas’s attributes after it has been created.</p>

            </div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>To make the canvas look as if it is in front of the element, set the element’s opacity CSS attribute to 0</p>

            </div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>This function is used when adding a Scrawl-canvas component to a stacked element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.addCanvas = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.canvas) {

        <span class="hljs-keyword">let</span> canvas = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'canvas'</span>),
            el = <span class="hljs-keyword">this</span>.domElement;

        <span class="hljs-keyword">let</span> rect = el.getBoundingClientRect(),
            style = <span class="hljs-built_in">window</span>.getComputedStyle(el);

        el.parentNode.insertBefore(canvas, <span class="hljs-keyword">this</span>.domElement);

        <span class="hljs-keyword">let</span> art = makeCanvas({
            <span class="hljs-attr">name</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span>-canvas`</span>,
            <span class="hljs-attr">domElement</span>: canvas,

            <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,

            <span class="hljs-attr">width</span>: rect.width,
            <span class="hljs-attr">height</span>: rect.height,

            <span class="hljs-attr">mimic</span>: <span class="hljs-keyword">this</span>.name,
            <span class="hljs-attr">lockTo</span>: <span class="hljs-string">'mimic'</span>,
            
            <span class="hljs-attr">useMimicDimensions</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">useMimicScale</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">useMimicStart</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">useMimicHandle</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">useMimicOffset</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">useMimicRotation</span>: <span class="hljs-literal">true</span>,

            <span class="hljs-attr">addOwnDimensionsToMimic</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">addOwnScaleToMimic</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">addOwnStartToMimic</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">addOwnHandleToMimic</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">addOwnOffsetToMimic</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">addOwnRotationToMimic</span>: <span class="hljs-literal">false</span>,
        });

        art.set(items);

        <span class="hljs-keyword">this</span>.canvas = art;

        <span class="hljs-keyword">return</span> art;
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <h2 id="exported-factory-function">Exported factory function</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> makeElement = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items</span>) </span>{
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Element(items);
};

constructors.Element = Element;

<span class="hljs-keyword">export</span> {
    makeElement,
};</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
