<!DOCTYPE html>

<html>
<head>
  <title>Shape factory</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="../core/animationloop.html">
                  ./source/core/animationloop.js
                </a>
              
                
                <a class="source" href="../core/component.html">
                  ./source/core/component.js
                </a>
              
                
                <a class="source" href="../core/document.html">
                  ./source/core/document.js
                </a>
              
                
                <a class="source" href="../core/init.html">
                  ./source/core/init.js
                </a>
              
                
                <a class="source" href="../core/library.html">
                  ./source/core/library.js
                </a>
              
                
                <a class="source" href="../core/userInteraction.html">
                  ./source/core/userInteraction.js
                </a>
              
                
                <a class="source" href="../core/utilities.html">
                  ./source/core/utilities.js
                </a>
              
                
                <a class="source" href="action.html">
                  ./source/factory/action.js
                </a>
              
                
                <a class="source" href="anchor.html">
                  ./source/factory/anchor.js
                </a>
              
                
                <a class="source" href="animation.html">
                  ./source/factory/animation.js
                </a>
              
                
                <a class="source" href="block.html">
                  ./source/factory/block.js
                </a>
              
                
                <a class="source" href="canvas.html">
                  ./source/factory/canvas.js
                </a>
              
                
                <a class="source" href="cell.html">
                  ./source/factory/cell.js
                </a>
              
                
                <a class="source" href="color.html">
                  ./source/factory/color.js
                </a>
              
                
                <a class="source" href="coordinate.html">
                  ./source/factory/coordinate.js
                </a>
              
                
                <a class="source" href="element.html">
                  ./source/factory/element.js
                </a>
              
                
                <a class="source" href="filter.html">
                  ./source/factory/filter.js
                </a>
              
                
                <a class="source" href="fontAttributes.html">
                  ./source/factory/fontAttributes.js
                </a>
              
                
                <a class="source" href="gradient.html">
                  ./source/factory/gradient.js
                </a>
              
                
                <a class="source" href="grid.html">
                  ./source/factory/grid.js
                </a>
              
                
                <a class="source" href="group.html">
                  ./source/factory/group.js
                </a>
              
                
                <a class="source" href="imageAsset.html">
                  ./source/factory/imageAsset.js
                </a>
              
                
                <a class="source" href="loom.html">
                  ./source/factory/loom.js
                </a>
              
                
                <a class="source" href="palette.html">
                  ./source/factory/palette.js
                </a>
              
                
                <a class="source" href="pattern.html">
                  ./source/factory/pattern.js
                </a>
              
                
                <a class="source" href="phrase.html">
                  ./source/factory/phrase.js
                </a>
              
                
                <a class="source" href="picture.html">
                  ./source/factory/picture.js
                </a>
              
                
                <a class="source" href="quaternion.html">
                  ./source/factory/quaternion.js
                </a>
              
                
                <a class="source" href="radialGradient.html">
                  ./source/factory/radialGradient.js
                </a>
              
                
                <a class="source" href="renderAnimation.html">
                  ./source/factory/renderAnimation.js
                </a>
              
                
                <a class="source" href="shape.html">
                  ./source/factory/shape.js
                </a>
              
                
                <a class="source" href="spriteAsset.html">
                  ./source/factory/spriteAsset.js
                </a>
              
                
                <a class="source" href="stack.html">
                  ./source/factory/stack.js
                </a>
              
                
                <a class="source" href="state.html">
                  ./source/factory/state.js
                </a>
              
                
                <a class="source" href="ticker.html">
                  ./source/factory/ticker.js
                </a>
              
                
                <a class="source" href="tween.html">
                  ./source/factory/tween.js
                </a>
              
                
                <a class="source" href="unstackedElement.html">
                  ./source/factory/unstackedElement.js
                </a>
              
                
                <a class="source" href="vector.html">
                  ./source/factory/vector.js
                </a>
              
                
                <a class="source" href="videoAsset.html">
                  ./source/factory/videoAsset.js
                </a>
              
                
                <a class="source" href="wheel.html">
                  ./source/factory/wheel.js
                </a>
              
                
                <a class="source" href="../mixin/anchor.html">
                  ./source/mixin/anchor.js
                </a>
              
                
                <a class="source" href="../mixin/asset.html">
                  ./source/mixin/asset.js
                </a>
              
                
                <a class="source" href="../mixin/assetConsumer.html">
                  ./source/mixin/assetConsumer.js
                </a>
              
                
                <a class="source" href="../mixin/base.html">
                  ./source/mixin/base.js
                </a>
              
                
                <a class="source" href="../mixin/cascade.html">
                  ./source/mixin/cascade.js
                </a>
              
                
                <a class="source" href="../mixin/dom.html">
                  ./source/mixin/dom.js
                </a>
              
                
                <a class="source" href="../mixin/entity.html">
                  ./source/mixin/entity.js
                </a>
              
                
                <a class="source" href="../mixin/filter.html">
                  ./source/mixin/filter.js
                </a>
              
                
                <a class="source" href="../mixin/position.html">
                  ./source/mixin/position.js
                </a>
              
                
                <a class="source" href="../mixin/shapePathCalculation.html">
                  ./source/mixin/shapePathCalculation.js
                </a>
              
                
                <a class="source" href="../mixin/styles.html">
                  ./source/mixin/styles.js
                </a>
              
                
                <a class="source" href="../mixin/tween.html">
                  ./source/mixin/tween.js
                </a>
              
                
                <a class="source" href="../worker/filter.html">
                  ./source/worker/filter.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1 id="shape-factory">Shape factory</h1>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h4 id="to-instantiate-objects-from-the-factory">To instantiate objects from the factory</h4>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h4 id="library-storage">Library storage</h4>

            </div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h4 id="clone-functionality">Clone functionality</h4>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h4 id="kill-functionality">Kill functionality</h4>

            </div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2 id="imports">Imports</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> { constructors, radian, artefact } <span class="hljs-keyword">from</span> <span class="hljs-string">'../core/library.js'</span>;
<span class="hljs-keyword">import</span> { mergeOver, xt, xta, addStrings, xtGet, defaultNonReturnFunction, capitalize, removeItem, pushUnique } <span class="hljs-keyword">from</span> <span class="hljs-string">'../core/utilities.js'</span>;

<span class="hljs-keyword">import</span> { requestVector, releaseVector } <span class="hljs-keyword">from</span> <span class="hljs-string">'./vector.js'</span>;
<span class="hljs-keyword">import</span> { makeCoordinate } <span class="hljs-keyword">from</span> <span class="hljs-string">'./coordinate.js'</span>;

<span class="hljs-keyword">import</span> baseMix <span class="hljs-keyword">from</span> <span class="hljs-string">'../mixin/base.js'</span>;
<span class="hljs-keyword">import</span> positionMix <span class="hljs-keyword">from</span> <span class="hljs-string">'../mixin/position.js'</span>;
<span class="hljs-keyword">import</span> anchorMix <span class="hljs-keyword">from</span> <span class="hljs-string">'../mixin/anchor.js'</span>;
<span class="hljs-keyword">import</span> entityMix <span class="hljs-keyword">from</span> <span class="hljs-string">'../mixin/entity.js'</span>;
<span class="hljs-keyword">import</span> filterMix <span class="hljs-keyword">from</span> <span class="hljs-string">'../mixin/filter.js'</span>;

<span class="hljs-keyword">import</span> calculatePath <span class="hljs-keyword">from</span> <span class="hljs-string">'../mixin/shapePathCalculation.js'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="shape-constructor">Shape constructor</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> Shape = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    <span class="hljs-keyword">this</span>.startControl = makeCoordinate();
    <span class="hljs-keyword">this</span>.control = makeCoordinate();
    <span class="hljs-keyword">this</span>.endControl = makeCoordinate();
    <span class="hljs-keyword">this</span>.end = makeCoordinate();

    <span class="hljs-keyword">this</span>.currentStartControl = makeCoordinate();
    <span class="hljs-keyword">this</span>.currentControl = makeCoordinate();
    <span class="hljs-keyword">this</span>.currentEndControl = makeCoordinate();
    <span class="hljs-keyword">this</span>.currentEnd = makeCoordinate();

    <span class="hljs-keyword">this</span>.controlledLineOffset = makeCoordinate();

    <span class="hljs-keyword">this</span>.startControlLockTo = <span class="hljs-string">'coord'</span>;
    <span class="hljs-keyword">this</span>.controlLockTo = <span class="hljs-string">'coord'</span>;
    <span class="hljs-keyword">this</span>.endControlLockTo = <span class="hljs-string">'coord'</span>;
    <span class="hljs-keyword">this</span>.endLockTo = <span class="hljs-string">'coord'</span>;

    <span class="hljs-keyword">this</span>.entityInit(items);

    <span class="hljs-keyword">this</span>.units = [];
    <span class="hljs-keyword">this</span>.unitLengths = [];
    <span class="hljs-keyword">this</span>.unitPartials = [];

    <span class="hljs-keyword">this</span>.pathed = [];

    <span class="hljs-keyword">this</span>.localBox = [];

    <span class="hljs-keyword">this</span>.dirtyStartControl = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.dirtyEndControl = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.dirtyControl = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.dirtyEnd = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">this</span>.dirtySpecies = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.dirtyPathObject = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h2 id="shape-object-prototype-setup">Shape object prototype setup</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> P = Shape.prototype = <span class="hljs-built_in">Object</span>.create(<span class="hljs-built_in">Object</span>.prototype);
P.type = <span class="hljs-string">'Shape'</span>;
P.lib = <span class="hljs-string">'entity'</span>;
P.isArtefact = <span class="hljs-literal">true</span>;
P.isAsset = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Apply mixins to prototype object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P = baseMix(P);
P = positionMix(P);
P = anchorMix(P);
P = entityMix(P);
P = filterMix(P);</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2 id="define-default-attributes">Define default attributes</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> defaultAttributes = {</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>The box represents the rectangle surrounding the shape</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    localBox: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Current species supported, note that the parameters required by each species’ ‘make?’ function differ:</p>

            </div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <ul>
<li>default ‘’ (makeShape)</li>
<li><strong>line</strong> (makeLine) </li>
<li><strong>quadratic</strong> (makeQuadratic)</li>
<li><strong>bezier</strong> (makeBezier)</li>
<li><strong>rectangle</strong> (makeRectangle)</li>
<li><strong>oval</strong> (makeOval)</li>
<li><strong>tetragon</strong> (makeTetragon)</li>
<li><strong>polygon</strong> (makePolygon)</li>
<li><strong>star</strong> (makeStar)</li>
<li><strong>spiral</strong> (makeSpiral)</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>TODO: The following species are under consideration - currently their ‘make?’ functions return a ‘m0,0’ Shape entity</p>

            </div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <ul>
<li><strong>radialshape</strong> (makeRadialShape) - use path and repeat arguments; functionality will be to: swivel the path around a central point ‘repeat’ number of times (angle = 360/repeat) and turn the resulting radial shape into a single path value</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <ul>
<li><strong>boxedshape</strong> (makeBoxedShape) - I’m a bit fuzzy about this one, but I want to somehow <em>box up</em> (relativize) other Shape paths with box width/height values which can then be manipulated - allowing us to stretch the Shape path to match its box dimensions</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <ul>
<li><strong>polyline</strong> (makePolyline) - a shape for freehand drawing. Should include a ‘points’ Array which could include [x,y] coordinates, or possibly any object containing x/y values (eg Vectors). The functionality would be to construct a long line (linear, possibly also quadratic for smoother lines) from the [points] data</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    species: <span class="hljs-string">''</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    pathed: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    pathDefinition: <span class="hljs-string">''</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Useful for development</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    showBoundingBox: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">boundingBoxColor</span>: <span class="hljs-string">'rgba(0,0,0,0.5)'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Sets a minimum dimensions size (in px) for calculating the bounding box</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    minimumBoundingBoxDimensions: <span class="hljs-number">20</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>By default, a Shape entity is just lines on the screen. It needs to be explicitly defined as a ‘path’ if it is to be used as a path by other artefacts.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    useAsPath: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">length</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">pathCalculatedOnce</span>: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Used when doing length calculations - the smaller this value, the greater the precision of the final length value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    precision: <span class="hljs-number">10</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Used by ‘spiral’ species</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    loops: <span class="hljs-number">0</span>,
    <span class="hljs-attr">loopIncrement</span>: <span class="hljs-number">0.2</span>,
    <span class="hljs-attr">innerRadius</span>: <span class="hljs-number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Used by ‘rectangle’ species</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    rectangleWidth: <span class="hljs-number">10</span>,
    <span class="hljs-attr">rectangleHeight</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">radiusTLX</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">radiusTLY</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">radiusTRX</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">radiusTRY</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">radiusBRX</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">radiusBRY</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">radiusBLX</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">radiusBLY</span>: <span class="hljs-number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Used by ‘oval’ and ‘tetragon’ species</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    radiusX: <span class="hljs-number">5</span>,
    <span class="hljs-attr">radiusY</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">intersectX</span>: <span class="hljs-number">0.5</span>,
    <span class="hljs-attr">intersectY</span>: <span class="hljs-number">0.5</span>,
    <span class="hljs-attr">offshootA</span>: <span class="hljs-number">0.55</span>,
    <span class="hljs-attr">offshootB</span>: <span class="hljs-number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Used by ‘polygon’ species</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    sides: <span class="hljs-number">0</span>,
    <span class="hljs-attr">sideLength</span>: <span class="hljs-number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Used by ‘star’ species</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    radius1: <span class="hljs-number">0</span>,
    <span class="hljs-attr">radius2</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">points</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">twist</span>: <span class="hljs-number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Used by ‘line’, ‘quadratic’, ‘bezier’ species</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    startControl: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">control</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">endControl</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">end</span>: <span class="hljs-literal">null</span>,

    <span class="hljs-attr">currentStartControl</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">currentControl</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">currentEndControl</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">currentEnd</span>: <span class="hljs-literal">null</span>,

    <span class="hljs-attr">startControlPivot</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">startControlPivotCorner</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">addStartControlPivotHandle</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">addStartControlPivotOffset</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">startControlPath</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">startControlPathPosition</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">addStartControlPathHandle</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">addStartControlPathOffset</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">startControlLockTo</span>: <span class="hljs-string">''</span>,

    <span class="hljs-attr">controlPivot</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">controlPivotCorner</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">addControlPivotHandle</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">addControlPivotOffset</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">controlPath</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">controlPathPosition</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">addControlPathHandle</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">addControlPathOffset</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">controlLockTo</span>: <span class="hljs-string">''</span>,

    <span class="hljs-attr">endControlPivot</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">endControlPivotCorner</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">addEndControlPivotHandle</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">addEndControlPivotOffset</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">endControlPath</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">endControlPathPosition</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">addEndControlPathHandle</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">addEndControlPathOffset</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">endControlLockTo</span>: <span class="hljs-string">''</span>,

    <span class="hljs-attr">endPivot</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">endPivotCorner</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">addEndPivotHandle</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">addEndPivotOffset</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">endPath</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">endPathPosition</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">addEndPathHandle</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">addEndPathOffset</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">endLockTo</span>: <span class="hljs-string">''</span>,

    <span class="hljs-attr">useStartAsControlPoint</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">controlledLineOffset</span>: <span class="hljs-literal">null</span>,
};
P.defs = mergeOver(P.defs, defaultAttributes);</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <h2 id="packet-management">Packet management</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.packetExclusions = pushUnique(P.packetExclusions, [<span class="hljs-string">'dimensions'</span>, <span class="hljs-string">'pathed'</span>, <span class="hljs-string">'controlledLineOffset'</span>]);
P.packetExclusionsByRegex = pushUnique(P.packetExclusionsByRegex, []);
P.packetCoordinates = pushUnique(P.packetCoordinates, [<span class="hljs-string">'startControl'</span>, <span class="hljs-string">'control'</span>, <span class="hljs-string">'endControl'</span>, <span class="hljs-string">'end'</span>]);
P.packetObjects = pushUnique(P.packetObjects, [<span class="hljs-string">'startControlPivot'</span>, <span class="hljs-string">'startControlPath'</span>, <span class="hljs-string">'controlPivot'</span>, <span class="hljs-string">'controlPath'</span>, <span class="hljs-string">'endControlPivot'</span>, <span class="hljs-string">'endControlPath'</span>, <span class="hljs-string">'endPivot'</span>, <span class="hljs-string">'endPath'</span>]);
P.packetFunctions = pushUnique(P.packetFunctions, []);

P.packetSpeciesCheck = [<span class="hljs-string">'loops'</span>, <span class="hljs-string">'loopIncrement'</span>, <span class="hljs-string">'innerRadius'</span>, <span class="hljs-string">'rectangleWidth'</span>, <span class="hljs-string">'rectangleHeight'</span>, <span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusTRY'</span>, <span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBRY'</span>, <span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusBLY'</span>, <span class="hljs-string">'radiusX'</span>, <span class="hljs-string">'radiusY'</span>, <span class="hljs-string">'intersectX'</span>, <span class="hljs-string">'intersectY'</span>, <span class="hljs-string">'offshootA'</span>, <span class="hljs-string">'offshootB'</span>, <span class="hljs-string">'sides'</span>, <span class="hljs-string">'sideLength'</span>, <span class="hljs-string">'radius1'</span>, <span class="hljs-string">'radius2'</span>, <span class="hljs-string">'points'</span>, <span class="hljs-string">'twist'</span>, <span class="hljs-string">'startControl'</span>, <span class="hljs-string">'control'</span>, <span class="hljs-string">'endControl'</span>, <span class="hljs-string">'end'</span>, <span class="hljs-string">'startControlPivot'</span>, <span class="hljs-string">'startControlPivotCorner'</span>, <span class="hljs-string">'addStartControlPivotHandle'</span>, <span class="hljs-string">'addStartControlPivotOffset'</span>, <span class="hljs-string">'startControlPath'</span>, <span class="hljs-string">'startControlPathPosition'</span>, <span class="hljs-string">'addStartControlPathHandle'</span>, <span class="hljs-string">'addStartControlPathOffset'</span>, <span class="hljs-string">'startControlLockTo'</span>, <span class="hljs-string">'controlPivot'</span>, <span class="hljs-string">'controlPivotCorner'</span>, <span class="hljs-string">'addControlPivotHandle'</span>, <span class="hljs-string">'addControlPivotOffset'</span>, <span class="hljs-string">'controlPath'</span>, <span class="hljs-string">'controlPathPosition'</span>, <span class="hljs-string">'addControlPathHandle'</span>, <span class="hljs-string">'addControlPathOffset'</span>, <span class="hljs-string">'controlLockTo'</span>, <span class="hljs-string">'endControlPivot'</span>, <span class="hljs-string">'endControlPivotCorner'</span>, <span class="hljs-string">'addEndControlPivotHandle'</span>, <span class="hljs-string">'addEndControlPivotOffset'</span>, <span class="hljs-string">'endControlPath'</span>, <span class="hljs-string">'endControlPathPosition'</span>, <span class="hljs-string">'addEndControlPathHandle'</span>, <span class="hljs-string">'addEndControlPathOffset'</span>, <span class="hljs-string">'endControlLockTo'</span>, <span class="hljs-string">'endPivot'</span>, <span class="hljs-string">'endPivotCorner'</span>, <span class="hljs-string">'addEndPivotHandle'</span>, <span class="hljs-string">'addEndPivotOffset'</span>, <span class="hljs-string">'endPath'</span>, <span class="hljs-string">'endPathPosition'</span>, <span class="hljs-string">'addEndPathHandle'</span>, <span class="hljs-string">'addEndPathOffset'</span>, <span class="hljs-string">'endLockTo'</span>, <span class="hljs-string">'pathDefinition'</span>];

P.packetSpeciesInclusions = {
    <span class="hljs-attr">spiral</span>: [<span class="hljs-string">'loops'</span>, <span class="hljs-string">'loopIncrement'</span>, <span class="hljs-string">'innerRadius'</span>],
    <span class="hljs-attr">rectangle</span>: [<span class="hljs-string">'rectangleWidth'</span>, <span class="hljs-string">'rectangleHeight'</span>, <span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusTRY'</span>, <span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBRY'</span>, <span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusBLY'</span>],
    <span class="hljs-attr">oval</span>: [<span class="hljs-string">'radiusX'</span>, <span class="hljs-string">'radiusY'</span>, <span class="hljs-string">'intersectX'</span>, <span class="hljs-string">'intersectY'</span>, <span class="hljs-string">'offshootA'</span>, <span class="hljs-string">'offshootB'</span>],
    <span class="hljs-attr">tetragon</span>: [<span class="hljs-string">'radiusX'</span>, <span class="hljs-string">'radiusY'</span>, <span class="hljs-string">'intersectX'</span>, <span class="hljs-string">'intersectY'</span>, <span class="hljs-string">'offshootA'</span>, <span class="hljs-string">'offshootB'</span>],
    <span class="hljs-attr">polygon</span>: [<span class="hljs-string">'sides'</span>, <span class="hljs-string">'sideLength'</span>],
    <span class="hljs-attr">star</span>: [<span class="hljs-string">'radius1'</span>, <span class="hljs-string">'radius2'</span>, <span class="hljs-string">'points'</span>, <span class="hljs-string">'twist'</span>],
    <span class="hljs-attr">line</span>: [<span class="hljs-string">'end'</span>, <span class="hljs-string">'endPivot'</span>, <span class="hljs-string">'endPivotCorner'</span>, <span class="hljs-string">'addEndPivotHandle'</span>, <span class="hljs-string">'addEndPivotOffset'</span>, <span class="hljs-string">'endPath'</span>, <span class="hljs-string">'endPathPosition'</span>, <span class="hljs-string">'addEndPathHandle'</span>, <span class="hljs-string">'addEndPathOffset'</span>, <span class="hljs-string">'endLockTo'</span>],
    <span class="hljs-attr">quadratic</span>: [<span class="hljs-string">'end'</span>, <span class="hljs-string">'endPivot'</span>, <span class="hljs-string">'endPivotCorner'</span>, <span class="hljs-string">'addEndPivotHandle'</span>, <span class="hljs-string">'addEndPivotOffset'</span>, <span class="hljs-string">'endPath'</span>, <span class="hljs-string">'endPathPosition'</span>, <span class="hljs-string">'addEndPathHandle'</span>, <span class="hljs-string">'addEndPathOffset'</span>, <span class="hljs-string">'endLockTo'</span>, <span class="hljs-string">'control'</span>, <span class="hljs-string">'controlPivot'</span>, <span class="hljs-string">'controlPivotCorner'</span>, <span class="hljs-string">'addControlPivotHandle'</span>, <span class="hljs-string">'addControlPivotOffset'</span>, <span class="hljs-string">'controlPath'</span>, <span class="hljs-string">'controlPathPosition'</span>, <span class="hljs-string">'addControlPathHandle'</span>, <span class="hljs-string">'addControlPathOffset'</span>, <span class="hljs-string">'controlLockTo'</span>],
    <span class="hljs-attr">bezier</span>: [<span class="hljs-string">'end'</span>, <span class="hljs-string">'endPivot'</span>, <span class="hljs-string">'endPivotCorner'</span>, <span class="hljs-string">'addEndPivotHandle'</span>, <span class="hljs-string">'addEndPivotOffset'</span>, <span class="hljs-string">'endPath'</span>, <span class="hljs-string">'endPathPosition'</span>, <span class="hljs-string">'addEndPathHandle'</span>, <span class="hljs-string">'addEndPathOffset'</span>, <span class="hljs-string">'endLockTo'</span>, <span class="hljs-string">'startControl'</span>, <span class="hljs-string">'startControlPivot'</span>, <span class="hljs-string">'startControlPivotCorner'</span>, <span class="hljs-string">'addStartControlPivotHandle'</span>, <span class="hljs-string">'addStartControlPivotOffset'</span>, <span class="hljs-string">'startControlPath'</span>, <span class="hljs-string">'startControlPathPosition'</span>, <span class="hljs-string">'addStartControlPathHandle'</span>, <span class="hljs-string">'addStartControlPathOffset'</span>, <span class="hljs-string">'startControlLockTo'</span>, <span class="hljs-string">'endControl'</span>, <span class="hljs-string">'endControlPivot'</span>, <span class="hljs-string">'endControlPivotCorner'</span>, <span class="hljs-string">'addEndControlPivotHandle'</span>, <span class="hljs-string">'addEndControlPivotOffset'</span>, <span class="hljs-string">'endControlPath'</span>, <span class="hljs-string">'endControlPathPosition'</span>, <span class="hljs-string">'addEndControlPathHandle'</span>, <span class="hljs-string">'addEndControlPathOffset'</span>, <span class="hljs-string">'endControlLockTo'</span>],
    <span class="hljs-attr">default</span>: [<span class="hljs-string">'pathDefinition'</span>],
};</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Overwrites mixin/entity.js function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.finalizePacketOut = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">copy, items</span>) </span>{

    <span class="hljs-keyword">let</span> stateCopy = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.state.saveAsPacket(items))[<span class="hljs-number">3</span>];
    copy = mergeOver(copy, stateCopy);

    copy = <span class="hljs-keyword">this</span>.handlePacketAnchor(copy, items);

    <span class="hljs-keyword">let</span> keyCheck = <span class="hljs-keyword">this</span>.packetSpeciesCheck,
        inclusions = <span class="hljs-keyword">this</span>.packetSpeciesInclusions.default;

    <span class="hljs-keyword">if</span> (copy.species) inclusions = <span class="hljs-keyword">this</span>.packetSpeciesInclusions[copy.species] || [];

    <span class="hljs-built_in">Object</span>.keys(copy).forEach(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {

        <span class="hljs-keyword">if</span> (keyCheck.indexOf(key) &gt;= <span class="hljs-number">0</span>) {

            <span class="hljs-keyword">if</span> (inclusions.indexOf(key) &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">delete</span> copy[key];
        }
    });

    <span class="hljs-keyword">return</span> copy;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <h2 id="define-getter-setter-and-deltasetter-functions">Define getter, setter and deltaSetter functions</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> S = P.setters,
    D = P.deltaSetters;</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.pathDefinition = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">if</span> (item.substring) <span class="hljs-keyword">this</span>.pathDefinition = item;
    <span class="hljs-keyword">this</span>.dirtyPathObject = <span class="hljs-literal">true</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.species = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">if</span> (xt(item)) {

        <span class="hljs-keyword">if</span> (item) <span class="hljs-keyword">this</span>.dirtyPathObject = <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">this</span>.species = item;
        <span class="hljs-keyword">this</span>.updateDirty();
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.useStartAsControlPoint = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.useStartAsControlPoint = item;

    <span class="hljs-keyword">if</span> (!item) {

        <span class="hljs-keyword">let</span> controlledLine = <span class="hljs-keyword">this</span>.controlledLineOffset;
        controlledLine[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
        controlledLine[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;
    }

    <span class="hljs-keyword">this</span>.updateDirty();
};</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Invalidate dimensions setters - dimensions are an emergent property of shapes, not a defining property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.width = defaultNonReturnFunction;
S.height = defaultNonReturnFunction;
S.dimensions = defaultNonReturnFunction;
D.width = defaultNonReturnFunction;
D.height = defaultNonReturnFunction;
D.dimensions = defaultNonReturnFunction;</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.endPivot = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setControlHelper(item, <span class="hljs-string">'endPivot'</span>, <span class="hljs-string">'end'</span>);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEnd = <span class="hljs-literal">true</span>;
};

S.endPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setControlHelper(item, <span class="hljs-string">'endPath'</span>, <span class="hljs-string">'end'</span>);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEnd = <span class="hljs-literal">true</span>;
};

S.controlPivot = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setControlHelper(item, <span class="hljs-string">'controlPivot'</span>, <span class="hljs-string">'control'</span>);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyControl = <span class="hljs-literal">true</span>;
};

S.controlPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setControlHelper(item, <span class="hljs-string">'controlPath'</span>, <span class="hljs-string">'control'</span>);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyControl = <span class="hljs-literal">true</span>;
};

S.endControlPivot = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setControlHelper(item, <span class="hljs-string">'endControlPivot'</span>, <span class="hljs-string">'endControl'</span>);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEndControl = <span class="hljs-literal">true</span>;
};

S.endControlPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setControlHelper(item, <span class="hljs-string">'endControlPath'</span>, <span class="hljs-string">'endControl'</span>);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEndControl = <span class="hljs-literal">true</span>;
};

S.startControlPivot = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setControlHelper(item, <span class="hljs-string">'startControlPivot'</span>, <span class="hljs-string">'startControl'</span>);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyStartControl = <span class="hljs-literal">true</span>;
};

S.startControlPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setControlHelper(item, <span class="hljs-string">'startControlPath'</span>, <span class="hljs-string">'startControl'</span>);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyStartControl = <span class="hljs-literal">true</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.startControlX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">if</span> (coord != <span class="hljs-literal">null</span>) {

        <span class="hljs-keyword">this</span>.startControl[<span class="hljs-number">0</span>] = coord;
        <span class="hljs-keyword">this</span>.updateDirty();
        <span class="hljs-keyword">this</span>.dirtyStartControl = <span class="hljs-literal">true</span>;
    }
};

S.startControlY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">if</span> (coord != <span class="hljs-literal">null</span>) {

        <span class="hljs-keyword">this</span>.startControl[<span class="hljs-number">1</span>] = coord;
        <span class="hljs-keyword">this</span>.updateDirty();
        <span class="hljs-keyword">this</span>.dirtyStartControl = <span class="hljs-literal">true</span>;
    }
};

S.startControl = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) </span>{

    <span class="hljs-keyword">this</span>.setCoordinateHelper(<span class="hljs-string">'startControl'</span>, x, y);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyStartControl = <span class="hljs-literal">true</span>;
};

D.startControlX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">let</span> c = <span class="hljs-keyword">this</span>.startControl;
    c[<span class="hljs-number">0</span>] = addStrings(c[<span class="hljs-number">0</span>], coord);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyStartControl = <span class="hljs-literal">true</span>;
};

D.startControlY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">let</span> c = <span class="hljs-keyword">this</span>.startControl;
    c[<span class="hljs-number">1</span>] = addStrings(c[<span class="hljs-number">1</span>], coord);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyStartControl = <span class="hljs-literal">true</span>;
};

D.startControl = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) </span>{

    <span class="hljs-keyword">this</span>.setDeltaCoordinateHelper(<span class="hljs-string">'startControl'</span>, x, y);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyStartControl = <span class="hljs-literal">true</span>;
};

S.endControlX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">if</span> (coord != <span class="hljs-literal">null</span>) {

        <span class="hljs-keyword">this</span>.endControl[<span class="hljs-number">0</span>] = coord;
        <span class="hljs-keyword">this</span>.updateDirty();
        <span class="hljs-keyword">this</span>.dirtyEndControl = <span class="hljs-literal">true</span>;
    }
};

S.endControlY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">if</span> (coord != <span class="hljs-literal">null</span>) {

        <span class="hljs-keyword">this</span>.endControl[<span class="hljs-number">1</span>] = coord;
        <span class="hljs-keyword">this</span>.updateDirty();
        <span class="hljs-keyword">this</span>.dirtyEndControl = <span class="hljs-literal">true</span>;
    }
};

S.endControl = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) </span>{

    <span class="hljs-keyword">this</span>.setCoordinateHelper(<span class="hljs-string">'endControl'</span>, x, y);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEndControl = <span class="hljs-literal">true</span>;
};

D.endControlX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">let</span> c = <span class="hljs-keyword">this</span>.endControl;
    c[<span class="hljs-number">0</span>] = addStrings(c[<span class="hljs-number">0</span>], coord);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEndControl = <span class="hljs-literal">true</span>;
};

D.endControlY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">let</span> c = <span class="hljs-keyword">this</span>.endControl;
    c[<span class="hljs-number">1</span>] = addStrings(c[<span class="hljs-number">1</span>], coord);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEndControl = <span class="hljs-literal">true</span>;
};

D.endControl = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) </span>{

    <span class="hljs-keyword">this</span>.setDeltaCoordinateHelper(<span class="hljs-string">'endControl'</span>, x, y);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEndControl = <span class="hljs-literal">true</span>;
};

S.controlX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">if</span> (coord != <span class="hljs-literal">null</span>) {

        <span class="hljs-keyword">this</span>.control[<span class="hljs-number">0</span>] = coord;
        <span class="hljs-keyword">this</span>.updateDirty();
        <span class="hljs-keyword">this</span>.dirtyControl = <span class="hljs-literal">true</span>;
    }
};

S.controlY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">if</span> (coord != <span class="hljs-literal">null</span>) {

        <span class="hljs-keyword">this</span>.control[<span class="hljs-number">1</span>] = coord;
        <span class="hljs-keyword">this</span>.updateDirty();
        <span class="hljs-keyword">this</span>.dirtyControl = <span class="hljs-literal">true</span>;
    }
};

S.control = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) </span>{

    <span class="hljs-keyword">this</span>.setCoordinateHelper(<span class="hljs-string">'control'</span>, x, y);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyControl = <span class="hljs-literal">true</span>;
};

D.controlX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">let</span> c = <span class="hljs-keyword">this</span>.control;
    c[<span class="hljs-number">0</span>] = addStrings(c[<span class="hljs-number">0</span>], coord);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyControl = <span class="hljs-literal">true</span>;
};

D.controlY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">let</span> c = <span class="hljs-keyword">this</span>.control;
    c[<span class="hljs-number">1</span>] = addStrings(c[<span class="hljs-number">1</span>], coord);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyControl = <span class="hljs-literal">true</span>;
};

D.control = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) </span>{

    <span class="hljs-keyword">this</span>.setDeltaCoordinateHelper(<span class="hljs-string">'control'</span>, x, y);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyControl = <span class="hljs-literal">true</span>;
};

S.endX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">if</span> (coord != <span class="hljs-literal">null</span>) {

        <span class="hljs-keyword">this</span>.end[<span class="hljs-number">0</span>] = coord;
        <span class="hljs-keyword">this</span>.updateDirty();
        <span class="hljs-keyword">this</span>.dirtyEnd = <span class="hljs-literal">true</span>;
    }
};

S.endY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">if</span> (coord != <span class="hljs-literal">null</span>) {

        <span class="hljs-keyword">this</span>.end[<span class="hljs-number">1</span>] = coord;
        <span class="hljs-keyword">this</span>.updateDirty();
        <span class="hljs-keyword">this</span>.dirtyEnd = <span class="hljs-literal">true</span>;
    }
};

S.end = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) </span>{

    <span class="hljs-keyword">this</span>.setCoordinateHelper(<span class="hljs-string">'end'</span>, x, y);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEnd = <span class="hljs-literal">true</span>;
};

D.endX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">let</span> c = <span class="hljs-keyword">this</span>.end;
    c[<span class="hljs-number">0</span>] = addStrings(c[<span class="hljs-number">0</span>], coord);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEnd = <span class="hljs-literal">true</span>;
};

D.endY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coord</span>) </span>{

    <span class="hljs-keyword">let</span> c = <span class="hljs-keyword">this</span>.end;
    c[<span class="hljs-number">1</span>] = addStrings(c[<span class="hljs-number">1</span>], coord);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEnd = <span class="hljs-literal">true</span>;
};

D.end = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) </span>{

    <span class="hljs-keyword">this</span>.setDeltaCoordinateHelper(<span class="hljs-string">'end'</span>, x, y);
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEnd = <span class="hljs-literal">true</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>TODO </p>
<ul>
<li>we also need the …LockXTo, …LockYTo versions</li>
<li>make sure this functionality replicates the original!</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.startControlLockTo = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.startControlLockTo = item;
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyStartControlLock = <span class="hljs-literal">true</span>;
};

S.endControlLockTo = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.endControlLockTo = item;
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEndControlLock = <span class="hljs-literal">true</span>;
};

S.controlLockTo = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.controlLockTo = item;
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyControlLock = <span class="hljs-literal">true</span>;
};

S.endLockTo = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.endLockTo = item;
    <span class="hljs-keyword">this</span>.updateDirty();
    <span class="hljs-keyword">this</span>.dirtyEndLock = <span class="hljs-literal">true</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.radius = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusX'</span>, <span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusTRY'</span>, <span class="hljs-string">'radiusBRY'</span>, <span class="hljs-string">'radiusBLY'</span>, <span class="hljs-string">'radiusY'</span>]);
};
S.radiusX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusX'</span>]);
};
S.radiusY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusTRY'</span>, <span class="hljs-string">'radiusBRY'</span>, <span class="hljs-string">'radiusBLY'</span>, <span class="hljs-string">'radiusY'</span>]);
};
S.radiusT = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusTRY'</span>]);
};
S.radiusB = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBRY'</span>, <span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusBLY'</span>]);
};
S.radiusL = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusBLY'</span>]);
};
S.radiusR = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusTRY'</span>, <span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBRY'</span>]);
};
S.radiusTX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTRX'</span>]);
};
S.radiusBX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBLX'</span>]);
};
S.radiusLX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusBLX'</span>]);
};
S.radiusRX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusBRX'</span>]);
};
S.radiusTY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusTRY'</span>]);
};
S.radiusBY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusBRY'</span>, <span class="hljs-string">'radiusBLY'</span>]);
};
S.radiusLY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusBLY'</span>]);
};
S.radiusRY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTRY'</span>, <span class="hljs-string">'radiusBRY'</span>]);
};
S.radiusTL = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTLY'</span>]);
};
S.radiusTR = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusTRY'</span>]);
};
S.radiusBL = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusBLY'</span>]);
};
S.radiusBR = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBRY'</span>]);
};
S.radiusTLX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>]);
};
S.radiusTLY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTLY'</span>]);
};
S.radiusTRX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTRX'</span>]);
};
S.radiusTRY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusTRY'</span>]);
};
S.radiusBRX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusBRX'</span>]);
};
S.radiusBRY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusBRY'</span>]);
};
S.radiusBLX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusBLX'</span>]);
};
S.radiusBLY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.setRectHelper(item, [<span class="hljs-string">'radiusBLY'</span>]);
};

D.radius = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusX'</span>, <span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusTRY'</span>, <span class="hljs-string">'radiusBRY'</span>, <span class="hljs-string">'radiusBLY'</span>, <span class="hljs-string">'radiusY'</span>]);
};
D.radiusX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusX'</span>]);
};
D.radiusY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusTRY'</span>, <span class="hljs-string">'radiusBRY'</span>, <span class="hljs-string">'radiusBLY'</span>, <span class="hljs-string">'radiusY'</span>]);
};
D.radiusT = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusTRY'</span>]);
};
D.radiusB = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBRY'</span>, <span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusBLY'</span>]);
};
D.radiusL = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusBLY'</span>]);
};
D.radiusR = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusTRY'</span>, <span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBRY'</span>]);
};
D.radiusTX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTRX'</span>]);
};
D.radiusBX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBLX'</span>]);
};
D.radiusLX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusBLX'</span>]);
};
D.radiusRX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusBRX'</span>]);
};
D.radiusTY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusTRY'</span>]);
};
D.radiusBY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusBRY'</span>, <span class="hljs-string">'radiusBLY'</span>]);
};
D.radiusLY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLY'</span>, <span class="hljs-string">'radiusBLY'</span>]);
};
D.radiusRY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTRY'</span>, <span class="hljs-string">'radiusBRY'</span>]);
};
D.radiusTL = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>, <span class="hljs-string">'radiusTLY'</span>]);
};
D.radiusTR = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTRX'</span>, <span class="hljs-string">'radiusTRY'</span>]);
};
D.radiusBL = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusBLX'</span>, <span class="hljs-string">'radiusBLY'</span>]);
};
D.radiusBR = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusBRX'</span>, <span class="hljs-string">'radiusBRY'</span>]);
};
D.radiusTLX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLX'</span>]);
};
D.radiusTLY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTLY'</span>]);
};
D.radiusTRX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTRX'</span>]);
};
D.radiusTRY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusTRY'</span>]);
};
D.radiusBRX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusBRX'</span>]);
};
D.radiusBRY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusBRY'</span>]);
};
D.radiusBLX = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusBLX'</span>]);
};
D.radiusBLY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.deltaRectHelper(item, [<span class="hljs-string">'radiusBLY'</span>]);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.sides = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.sides = item;
    <span class="hljs-keyword">this</span>.updateDirty();
};

D.sides = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.sides += item;
    <span class="hljs-keyword">this</span>.updateDirty();
};

S.sideLength = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.sideLength = item;
    <span class="hljs-keyword">this</span>.updateDirty();
};

D.sideLength = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.sideLength += item;
    <span class="hljs-keyword">this</span>.updateDirty();
};</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.radius1 = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.radius1 = item;
    <span class="hljs-keyword">this</span>.updateDirty();
};

D.radius1 = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.radius1 += item;
    <span class="hljs-keyword">this</span>.updateDirty();
};

S.radius2 = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.radius2 = item;
    <span class="hljs-keyword">this</span>.updateDirty();
};

D.radius2 = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.radius2 += item;
    <span class="hljs-keyword">this</span>.updateDirty();
};</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.points = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.points = item;
    <span class="hljs-keyword">this</span>.updateDirty();
};

D.points = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.points += item;
    <span class="hljs-keyword">this</span>.updateDirty();
};</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.twist = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.twist = item;
    <span class="hljs-keyword">this</span>.updateDirty();
};

D.twist = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.twist += item;
    <span class="hljs-keyword">this</span>.updateDirty();
};</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.loops = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.loops = item;
    <span class="hljs-keyword">this</span>.updateDirty();
};

D.loops = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.loops += item;
    <span class="hljs-keyword">this</span>.updateDirty();
};</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.innerRadius = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.innerRadius = item;
    <span class="hljs-keyword">this</span>.updateDirty();
};

D.innerRadius = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

    <span class="hljs-keyword">this</span>.innerRadius += item;
    <span class="hljs-keyword">this</span>.updateDirty();
};</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <h2 id="define-prototype-functions">Define prototype functions</h2>

            </div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.updateDirty = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">this</span>.dirtySpecies = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.dirtyPathObject = <span class="hljs-literal">true</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.setRectHelper = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, corners</span>) </span>{

    <span class="hljs-keyword">this</span>.updateDirty();

    corners.forEach(<span class="hljs-function"><span class="hljs-params">corner</span> =&gt;</span> {

        <span class="hljs-keyword">this</span>[corner] = item;
    }, <span class="hljs-keyword">this</span>);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.deltaRectHelper = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, corners</span>) </span>{

    <span class="hljs-keyword">this</span>.updateDirty();

    corners.forEach(<span class="hljs-function"><span class="hljs-params">corner</span> =&gt;</span> {

        <span class="hljs-keyword">this</span>[corner] = addStrings(<span class="hljs-keyword">this</span>[corner], item);
    }, <span class="hljs-keyword">this</span>);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.setControlHelper = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, attr, label</span>) </span>{

    <span class="hljs-keyword">let</span> oldControl = <span class="hljs-keyword">this</span>[attr],
        newControl = (item.substring) ? artefact[item] : item;

    <span class="hljs-keyword">if</span> (newControl &amp;&amp; newControl.isArtefact) {

        <span class="hljs-keyword">if</span> (oldControl &amp;&amp; oldControl.isArtefact &amp;&amp; oldControl[<span class="hljs-string">`<span class="hljs-subst">${label}</span>Subscriber`</span>]) removeItem(oldControl[<span class="hljs-string">`<span class="hljs-subst">${label}</span>Subscriber`</span>], <span class="hljs-keyword">this</span>.name);

        <span class="hljs-keyword">if</span> (newControl[<span class="hljs-string">`<span class="hljs-subst">${label}</span>Subscriber`</span>]) pushUnique(newControl[<span class="hljs-string">`<span class="hljs-subst">${label}</span>Subscriber`</span>], <span class="hljs-keyword">this</span>.name);

        <span class="hljs-keyword">this</span>[attr] = newControl;
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.midInitActions = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items</span>) </span>{

    <span class="hljs-keyword">this</span>.set(items);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.positionPointOnPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">vals</span>) </span>{

    <span class="hljs-keyword">let</span> v = requestVector(vals);

    v.vectorSubtract(<span class="hljs-keyword">this</span>.currentStampHandlePosition);

    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.flipReverse) v.x = -v.x;
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.flipUpend) v.y = -v.y;

    v.rotate(<span class="hljs-keyword">this</span>.roll);

    v.vectorAdd(<span class="hljs-keyword">this</span>.currentStampPosition);

    <span class="hljs-keyword">let</span> res = {
        <span class="hljs-attr">x</span>: v.x,
        <span class="hljs-attr">y</span>: v.y
    }

    releaseVector(v);

    <span class="hljs-keyword">return</span> res;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.getBezierXY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, sx, sy, cp1x, cp1y, cp2x, cp2y, ex, ey</span>) </span>{

    <span class="hljs-keyword">let</span> T = <span class="hljs-number">1</span> - t;

    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">x</span>: (<span class="hljs-built_in">Math</span>.pow(T, <span class="hljs-number">3</span>) * sx) + (<span class="hljs-number">3</span> * t * <span class="hljs-built_in">Math</span>.pow(T, <span class="hljs-number">2</span>) * cp1x) + (<span class="hljs-number">3</span> * t * t * T * cp2x) + (t * t * t * ex),
        <span class="hljs-attr">y</span>: (<span class="hljs-built_in">Math</span>.pow(T, <span class="hljs-number">3</span>) * sy) + (<span class="hljs-number">3</span> * t * <span class="hljs-built_in">Math</span>.pow(T, <span class="hljs-number">2</span>) * cp1y) + (<span class="hljs-number">3</span> * t * t * T * cp2y) + (t * t * t * ey)
    };
};

P.getQuadraticXY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, sx, sy, cp1x, cp1y, ex, ey</span>) </span>{

    <span class="hljs-keyword">let</span> T = <span class="hljs-number">1</span> - t;

    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">x</span>: T * T * sx + <span class="hljs-number">2</span> * T * t * cp1x + t * t * ex,
        <span class="hljs-attr">y</span>: T * T * sy + <span class="hljs-number">2</span> * T * t * cp1y + t * t * ey
    };
};

P.getLinearXY = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, sx, sy, ex, ey</span>) </span>{

    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">x</span>: sx + ((ex - sx) * t),
        <span class="hljs-attr">y</span>: sy + ((ey - sy) * t)
    };
};</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.getBezierAngle = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, sx, sy, cp1x, cp1y, cp2x, cp2y, ex, ey</span>) </span>{

    <span class="hljs-keyword">let</span> T = <span class="hljs-number">1</span> - t,
        dx = <span class="hljs-built_in">Math</span>.pow(T, <span class="hljs-number">2</span>) * (cp1x - sx) + <span class="hljs-number">2</span> * t * T * (cp2x - cp1x) + t * t * (ex - cp2x),
        dy = <span class="hljs-built_in">Math</span>.pow(T, <span class="hljs-number">2</span>) * (cp1y - sy) + <span class="hljs-number">2</span> * t * T * (cp2y - cp1y) + t * t * (ey - cp2y);

    <span class="hljs-keyword">return</span> (-<span class="hljs-built_in">Math</span>.atan2(dx, dy) + (<span class="hljs-number">0.5</span> * <span class="hljs-built_in">Math</span>.PI)) / radian;
};

P.getQuadraticAngle = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, sx, sy, cp1x, cp1y, ex, ey</span>) </span>{

    <span class="hljs-keyword">let</span> T = <span class="hljs-number">1</span> - t,
        dx = <span class="hljs-number">2</span> * T * (cp1x - sx) + <span class="hljs-number">2</span> * t * (ex - cp1x),
        dy = <span class="hljs-number">2</span> * T * (cp1y - sy) + <span class="hljs-number">2</span> * t * (ey - cp1y);

    <span class="hljs-keyword">return</span> (-<span class="hljs-built_in">Math</span>.atan2(dx, dy) + (<span class="hljs-number">0.5</span> * <span class="hljs-built_in">Math</span>.PI)) / radian;
};

P.getLinearAngle = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t, sx, sy, ex, ey</span>) </span>{

    <span class="hljs-keyword">let</span> dx = ex - sx,
        dy = ey - sy;

    <span class="hljs-keyword">return</span> (-<span class="hljs-built_in">Math</span>.atan2(dx, dy) + (<span class="hljs-number">0.5</span> * <span class="hljs-built_in">Math</span>.PI)) / radian;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.getPathPositionData = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">pos</span>) </span>{

    <span class="hljs-keyword">if</span> (xt(pos) &amp;&amp; pos.toFixed) {

        <span class="hljs-keyword">let</span> remainder = pos % <span class="hljs-number">1</span>,
            unitPartials = <span class="hljs-keyword">this</span>.unitPartials,
            previousLen = <span class="hljs-number">0</span>, 
            stoppingLen, myLen, i, iz, unit, species;</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>… because sometimes everything doesn’t all add up to 1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (pos === <span class="hljs-number">0</span>) remainder = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pos === <span class="hljs-number">1</span>) remainder = <span class="hljs-number">0.9999</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <ol>
<li>determine the pertinent subpath to use for calculation</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, iz = unitPartials.length; i &lt; iz; i++) {

            species = <span class="hljs-keyword">this</span>.units[i][<span class="hljs-number">0</span>];
            <span class="hljs-keyword">if</span> (species === <span class="hljs-string">'move'</span> || species === <span class="hljs-string">'close'</span> || species === <span class="hljs-string">'unknown'</span>) <span class="hljs-keyword">continue</span>;

            stoppingLen = unitPartials[i];

            <span class="hljs-keyword">if</span> (remainder &lt;= stoppingLen) {</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <ol start="2">
<li>calculate point along the subpath the pos value represents</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>                unit = <span class="hljs-keyword">this</span>.units[i];
                myLen = (remainder - previousLen) / (stoppingLen - previousLen);

                <span class="hljs-keyword">break</span>;
            }

            previousLen = stoppingLen;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <ol start="3">
<li>get coordinates and angle at that point from subpath; return results</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (unit) {

            <span class="hljs-keyword">let</span> [unitSpecies, ...vars] = unit;

            <span class="hljs-keyword">let</span> myPoint, angle;

            <span class="hljs-keyword">switch</span> (unitSpecies) {

                <span class="hljs-keyword">case</span> <span class="hljs-string">'linear'</span> :
                    myPoint = <span class="hljs-keyword">this</span>.positionPointOnPath(<span class="hljs-keyword">this</span>.getLinearXY(myLen, ...vars));
                    angle = <span class="hljs-keyword">this</span>.getLinearAngle(myLen, ...vars);
                    <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">case</span> <span class="hljs-string">'quadratic'</span> :
                    myPoint = <span class="hljs-keyword">this</span>.positionPointOnPath(<span class="hljs-keyword">this</span>.getQuadraticXY(myLen, ...vars));
                    angle = <span class="hljs-keyword">this</span>.getQuadraticAngle(myLen, ...vars);
                    <span class="hljs-keyword">break</span>;
                    
                <span class="hljs-keyword">case</span> <span class="hljs-string">'bezier'</span> :
                    myPoint = <span class="hljs-keyword">this</span>.positionPointOnPath(<span class="hljs-keyword">this</span>.getBezierXY(myLen, ...vars));
                    angle = <span class="hljs-keyword">this</span>.getBezierAngle(myLen, ...vars);
                    <span class="hljs-keyword">break</span>;
            }

            <span class="hljs-keyword">let</span> flipAngle = <span class="hljs-number">0</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.flipReverse) flipAngle++;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.flipUpend) flipAngle++;

            <span class="hljs-keyword">if</span> (flipAngle === <span class="hljs-number">1</span>) angle = -angle;

            angle += <span class="hljs-keyword">this</span>.roll;

            <span class="hljs-keyword">let</span> stamp = <span class="hljs-keyword">this</span>.currentStampPosition,
                lineOffset = <span class="hljs-keyword">this</span>.controlledLineOffset,
                localBox = <span class="hljs-keyword">this</span>.localBox;

            myPoint.x += lineOffset[<span class="hljs-number">0</span>];
            myPoint.y += lineOffset[<span class="hljs-number">1</span>];

            myPoint.angle = angle;

            <span class="hljs-keyword">return</span> myPoint;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.cleanControlLock = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">label</span>) </span>{

    <span class="hljs-keyword">let</span> capLabel = capitalize(label);

    <span class="hljs-keyword">this</span>[<span class="hljs-string">`dirty<span class="hljs-subst">${capLabel}</span>Lock`</span>] = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>[<span class="hljs-string">`dirty<span class="hljs-subst">${capLabel}</span>`</span>] = <span class="hljs-literal">true</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.cleanControl = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">label</span>) </span>{

    <span class="hljs-keyword">let</span> capLabel = capitalize(label);

    <span class="hljs-keyword">this</span>[<span class="hljs-string">`dirty<span class="hljs-subst">${capLabel}</span>`</span>] = <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">let</span> pivotLabel = <span class="hljs-string">`<span class="hljs-subst">${label}</span>Pivot`</span>,
        pathLabel = <span class="hljs-string">`<span class="hljs-subst">${label}</span>Path`</span>,
        pivot = <span class="hljs-keyword">this</span>[pivotLabel],
        path = <span class="hljs-keyword">this</span>[pathLabel],
        art, pathData;

    <span class="hljs-keyword">if</span> (pivot &amp;&amp; pivot.substring) {

        art = artefact[pivot];

        <span class="hljs-keyword">if</span> (art) pivot = art;
    }

    <span class="hljs-keyword">if</span> (path &amp;&amp; path.substring) {

        art = artefact[path];

        <span class="hljs-keyword">if</span> (art) path = art;
    }

    <span class="hljs-keyword">let</span> lock = <span class="hljs-keyword">this</span>[<span class="hljs-string">`<span class="hljs-subst">${label}</span>LockTo`</span>], 
        x, y, ox, oy, here, flag,
        raw = <span class="hljs-keyword">this</span>[label],
        current = <span class="hljs-keyword">this</span>[<span class="hljs-string">`current<span class="hljs-subst">${capLabel}</span>`</span>];

    <span class="hljs-keyword">if</span> (lock === <span class="hljs-string">'pivot'</span> &amp;&amp; (!pivot || pivot.substring)) lock = <span class="hljs-string">'coord'</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (lock === <span class="hljs-string">'path'</span> &amp;&amp; (!path || path.substring)) lock = <span class="hljs-string">'coord'</span>;

    <span class="hljs-keyword">switch</span>(lock) {

        <span class="hljs-keyword">case</span> <span class="hljs-string">'pivot'</span> :

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pivotCorner &amp;&amp; pivot.getCornerCoordinate) {

                [x, y] = pivot.getCornerCoordinate(<span class="hljs-keyword">this</span>[<span class="hljs-string">`<span class="hljs-subst">${label}</span>PivotCorner`</span>]);
            }
            <span class="hljs-keyword">else</span> [x, y] = pivot.currentStampPosition;

            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.addPivotOffset) {

                [ox, oy] = pivot.currentOffset;
                x -= ox;
                y -= oy;
            }

            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'path'</span> :

            pathData = <span class="hljs-keyword">this</span>.getControlPathData(path, label, capLabel);

            x = pathData.x;
            y = pathData.y;

            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.addPathOffset) {

                x -= path.currentOffset[<span class="hljs-number">0</span>];
                y -= path.currentOffset[<span class="hljs-number">1</span>];
            }

            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'mouse'</span> :

            here = <span class="hljs-keyword">this</span>.getHere();

            x = here.x || <span class="hljs-number">0</span>;
            y = here.y || <span class="hljs-number">0</span>;

            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">default</span> :
            
            x = y = <span class="hljs-number">0</span>;

            here = <span class="hljs-keyword">this</span>.getHere();

            <span class="hljs-keyword">if</span> (xt(here)) {

                <span class="hljs-keyword">if</span> (xta(here.w, here.h)) {

                    <span class="hljs-keyword">this</span>.cleanPosition(current, raw, [here.w, here.h]);
                    [x, y] = current;
                }
            }
    }

    current[<span class="hljs-number">0</span>] = x;
    current[<span class="hljs-number">1</span>] = y;

    <span class="hljs-keyword">this</span>.dirtySpecies = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.dirtyPathObject = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">this</span>.updatePathSubscribers();
};</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>Overwrites mixin/position.js function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.calculateSensors = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">let</span> sensorSpacing = <span class="hljs-keyword">this</span>.sensorSpacing || <span class="hljs-number">50</span>,
        length = <span class="hljs-keyword">this</span>.length,
        segments = <span class="hljs-built_in">parseInt</span>(length / sensorSpacing, <span class="hljs-number">10</span>),
        pos = <span class="hljs-number">0</span>,
        data, i, iz;

    <span class="hljs-keyword">if</span> (segments &lt; <span class="hljs-number">4</span>) segments = <span class="hljs-number">4</span>;

    <span class="hljs-keyword">let</span> segmentLength = <span class="hljs-number">1</span> / segments;

    <span class="hljs-keyword">let</span> sensors = <span class="hljs-keyword">this</span>.currentSensors;
    sensors.length = <span class="hljs-number">0</span>;

    data = <span class="hljs-keyword">this</span>.getPathPositionData(<span class="hljs-number">0</span>);
    sensors.push([data.x, data.y]);
    
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; segments; i++) {

        pos += segmentLength;
        data = <span class="hljs-keyword">this</span>.getPathPositionData(pos);
        sensors.push([data.x, data.y]);
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.getControlPathData = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path, label, capLabel</span>) </span>{

    <span class="hljs-keyword">let</span> pathPos = <span class="hljs-keyword">this</span>[<span class="hljs-string">`<span class="hljs-subst">${label}</span>PathPosition`</span>],
        tempPos = pathPos,
        pathData = path.getPathPositionData(pathPos);

    <span class="hljs-keyword">if</span> (pathPos &lt; <span class="hljs-number">0</span>) pathPos += <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (pathPos &gt; <span class="hljs-number">1</span>) pathPos = pathPos % <span class="hljs-number">1</span>;

    pathPos = <span class="hljs-built_in">parseFloat</span>(pathPos.toFixed(<span class="hljs-number">6</span>));
    <span class="hljs-keyword">if</span> (pathPos !== tempPos) <span class="hljs-keyword">this</span>[<span class="hljs-string">`<span class="hljs-subst">${label}</span>PathPosition`</span>] = pathPos;

    <span class="hljs-keyword">if</span> (pathData) <span class="hljs-keyword">return</span> pathData;

    <span class="hljs-keyword">else</span> {

        <span class="hljs-keyword">let</span> here = <span class="hljs-keyword">this</span>.getHere();

        <span class="hljs-keyword">if</span> (xt(here)) {

            <span class="hljs-keyword">if</span> (xta(here.w, here.h)) {

                <span class="hljs-keyword">let</span> current = <span class="hljs-keyword">this</span>[<span class="hljs-string">`current<span class="hljs-subst">${capLabel}</span>`</span>];

                <span class="hljs-keyword">this</span>.cleanPosition(current, <span class="hljs-keyword">this</span>[label], [here.w, here.h]);

                <span class="hljs-keyword">return</span> {
                    <span class="hljs-attr">x</span>: current[<span class="hljs-number">0</span>],
                    <span class="hljs-attr">y</span>: current[<span class="hljs-number">1</span>]
                };
            }
        }
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>
        };
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>Overwrites mixin/position.js function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.updatePathSubscribers = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">this</span>.pathed.forEach(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {

        <span class="hljs-keyword">let</span> instance = artefact[name];

        <span class="hljs-keyword">if</span> (instance) {

            instance.dirtyStart = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">if</span> (instance.addPathHandle) instance.dirtyHandle = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">if</span> (instance.addPathOffset) instance.dirtyOffset = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">if</span> (instance.addPathRotation) instance.dirtyRotation = <span class="hljs-literal">true</span>;
        }
    });
};</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.prepareStamp = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyHost) <span class="hljs-keyword">this</span>.dirtyHost = <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyLock) <span class="hljs-keyword">this</span>.cleanLock();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyStartControlLock) <span class="hljs-keyword">this</span>.cleanControlLock(<span class="hljs-string">'startControl'</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyEndControlLock) <span class="hljs-keyword">this</span>.cleanControlLock(<span class="hljs-string">'endControl'</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyControlLock) <span class="hljs-keyword">this</span>.cleanControlLock(<span class="hljs-string">'control'</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyEndLock) <span class="hljs-keyword">this</span>.cleanControlLock(<span class="hljs-string">'end'</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.startControlLockTo === <span class="hljs-string">'path'</span>) <span class="hljs-keyword">this</span>.dirtyStartControl = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.endControlLockTo === <span class="hljs-string">'path'</span>) <span class="hljs-keyword">this</span>.dirtyEndControl = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.controlLockTo === <span class="hljs-string">'path'</span>) <span class="hljs-keyword">this</span>.dirtyControl = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.endLockTo === <span class="hljs-string">'path'</span>) <span class="hljs-keyword">this</span>.dirtyEnd = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyScale || <span class="hljs-keyword">this</span>.dirtySpecies || <span class="hljs-keyword">this</span>.dirtyDimensions || <span class="hljs-keyword">this</span>.dirtyStart || <span class="hljs-keyword">this</span>.dirtyStartControl || <span class="hljs-keyword">this</span>.dirtyEndControl || <span class="hljs-keyword">this</span>.dirtyControl || <span class="hljs-keyword">this</span>.dirtyEnd || <span class="hljs-keyword">this</span>.dirtyHandle) {

        <span class="hljs-keyword">this</span>.dirtyPathObject = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.dirtyCollision = <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.useStartAsControlPoint &amp;&amp; <span class="hljs-keyword">this</span>.dirtyStart) {

            <span class="hljs-keyword">this</span>.dirtySpecies = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">this</span>.pathCalculatedOnce = <span class="hljs-literal">false</span>;
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyScale || <span class="hljs-keyword">this</span>.dirtySpecies || <span class="hljs-keyword">this</span>.dirtyStartControl || <span class="hljs-keyword">this</span>.dirtyEndControl || <span class="hljs-keyword">this</span>.dirtyControl || <span class="hljs-keyword">this</span>.dirtyEnd)  <span class="hljs-keyword">this</span>.pathCalculatedOnce = <span class="hljs-literal">false</span>;

    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isBeingDragged || <span class="hljs-keyword">this</span>.lockTo.indexOf(<span class="hljs-string">'mouse'</span>) &gt;= <span class="hljs-number">0</span>) {

        <span class="hljs-keyword">this</span>.dirtyStampPositions = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.dirtyCollision = <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.useStartAsControlPoint) {

            <span class="hljs-keyword">this</span>.dirtySpecies = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">this</span>.dirtyPathObject = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">this</span>.pathCalculatedOnce = <span class="hljs-literal">false</span>;
        }
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyRotation || <span class="hljs-keyword">this</span>.dirtyOffset) <span class="hljs-keyword">this</span>.dirtyCollision = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyCollision &amp;&amp; !<span class="hljs-keyword">this</span>.useAsPath) {

        <span class="hljs-keyword">this</span>.useAsPath = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.dirtyPathObject = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.pathCalculatedOnce = <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyScale) <span class="hljs-keyword">this</span>.cleanScale();

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyStart) <span class="hljs-keyword">this</span>.cleanStart();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyStartControl) <span class="hljs-keyword">this</span>.cleanControl(<span class="hljs-string">'startControl'</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyEndControl) <span class="hljs-keyword">this</span>.cleanControl(<span class="hljs-string">'endControl'</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyControl) <span class="hljs-keyword">this</span>.cleanControl(<span class="hljs-string">'control'</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyEnd) <span class="hljs-keyword">this</span>.cleanControl(<span class="hljs-string">'end'</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyOffset) <span class="hljs-keyword">this</span>.cleanOffset();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyRotation) <span class="hljs-keyword">this</span>.cleanRotation();

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyStampPositions) <span class="hljs-keyword">this</span>.cleanStampPositions();

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtySpecies) <span class="hljs-keyword">this</span>.cleanSpecies();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyPathObject) <span class="hljs-keyword">this</span>.cleanPathObject();

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyPositionSubscribers) <span class="hljs-keyword">this</span>.updatePositionSubscribers();
};</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.cleanPathObject = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">this</span>.dirtyPathObject = <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.noPathUpdates || !<span class="hljs-keyword">this</span>.pathObject) {

        <span class="hljs-keyword">this</span>.calculateLocalPath(<span class="hljs-keyword">this</span>.pathDefinition);
        <span class="hljs-keyword">this</span>.cleanStampPositionsAdditionalActions();

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyDimensions) <span class="hljs-keyword">this</span>.cleanDimensions();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyHandle) <span class="hljs-keyword">this</span>.cleanHandle();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dirtyStampHandlePositions) <span class="hljs-keyword">this</span>.cleanStampHandlePositions();

        <span class="hljs-keyword">let</span> handle = <span class="hljs-keyword">this</span>.currentStampHandlePosition,
            controlledLine = <span class="hljs-keyword">this</span>.controlledLineOffset;

        <span class="hljs-keyword">this</span>.pathObject = <span class="hljs-keyword">new</span> Path2D(<span class="hljs-string">`m<span class="hljs-subst">${-handle[<span class="hljs-number">0</span>] + controlledLine[<span class="hljs-number">0</span>]}</span>,<span class="hljs-subst">${-handle[<span class="hljs-number">1</span>] + controlledLine[<span class="hljs-number">1</span>]}</span><span class="hljs-subst">${<span class="hljs-keyword">this</span>.localPath}</span>`</span>);
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.cleanDimensions = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">this</span>.dirtyDimensions = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.dirtyHandle = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">this</span>.dirtyStart = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.dirtyStartControl = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.dirtyEndControl = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.dirtyControl = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.dirtyEnd = <span class="hljs-literal">true</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.calculateLocalPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d</span>) </span>{

    <span class="hljs-keyword">let</span> res;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collides) <span class="hljs-keyword">this</span>.useAsPath = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.pathCalculatedOnce) {

        res = calculatePath(d, <span class="hljs-keyword">this</span>.currentScale, <span class="hljs-keyword">this</span>.currentStart, <span class="hljs-keyword">this</span>.useAsPath, <span class="hljs-keyword">this</span>.precision);
        <span class="hljs-keyword">this</span>.pathCalculatedOnce = <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">if</span> (res) {

        <span class="hljs-keyword">this</span>.localPath = res.localPath;
        <span class="hljs-keyword">this</span>.units = res.units;
        <span class="hljs-keyword">this</span>.unitLengths = res.unitLengths;
        <span class="hljs-keyword">this</span>.unitPartials = res.unitPartials;
        <span class="hljs-keyword">this</span>.length = res.length;

        <span class="hljs-keyword">let</span> maxX = res.maxX,
            maxY = res.maxY,
            minX = res.minX,
            minY = res.minY;

        <span class="hljs-keyword">let</span> dims = <span class="hljs-keyword">this</span>.dimensions,
            currentDims = <span class="hljs-keyword">this</span>.currentDimensions,
            box = <span class="hljs-keyword">this</span>.localBox;

        dims[<span class="hljs-number">0</span>] = <span class="hljs-built_in">parseFloat</span>((maxX - minX).toFixed(<span class="hljs-number">1</span>));
        dims[<span class="hljs-number">1</span>] = <span class="hljs-built_in">parseFloat</span>((maxY - minY).toFixed(<span class="hljs-number">1</span>));
        
        <span class="hljs-keyword">if</span>(dims[<span class="hljs-number">0</span>] !== currentDims[<span class="hljs-number">0</span>] || dims[<span class="hljs-number">1</span>] !== currentDims[<span class="hljs-number">1</span>]) {

            currentDims[<span class="hljs-number">0</span>] = dims[<span class="hljs-number">0</span>];
            currentDims[<span class="hljs-number">1</span>] = dims[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">this</span>.dirtyHandle = <span class="hljs-literal">true</span>;
        }


        box.length = <span class="hljs-number">0</span>;
        box.push(<span class="hljs-built_in">parseFloat</span>(minX.toFixed(<span class="hljs-number">1</span>)), <span class="hljs-built_in">parseFloat</span>(minY.toFixed(<span class="hljs-number">1</span>)), dims[<span class="hljs-number">0</span>], dims[<span class="hljs-number">1</span>]);
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.cleanStampPositionsAdditionalActions = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.useStartAsControlPoint) {

        <span class="hljs-keyword">let</span> [x, y] = <span class="hljs-keyword">this</span>.localBox,
            lineOffset = <span class="hljs-keyword">this</span>.controlledLineOffset;

        lineOffset[<span class="hljs-number">0</span>] = (x &lt; <span class="hljs-number">0</span>) ? x : <span class="hljs-number">0</span>;
        lineOffset[<span class="hljs-number">1</span>] = (y &lt; <span class="hljs-number">0</span>) ? y : <span class="hljs-number">0</span>;

        <span class="hljs-keyword">this</span>.dirtyPathObject = <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.path &amp;&amp; <span class="hljs-keyword">this</span>.lockTo.indexOf(<span class="hljs-string">'path'</span>) &gt;= <span class="hljs-number">0</span>) {

        <span class="hljs-keyword">this</span>.dirtyStampPositions = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.dirtyStampHandlePositions = <span class="hljs-literal">true</span>;
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.cleanSpecies = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">this</span>.dirtySpecies = <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">let</span> p = <span class="hljs-string">'M0,0'</span>;

    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">this</span>.species) {

        <span class="hljs-keyword">case</span> <span class="hljs-string">'line'</span> :
            p = <span class="hljs-keyword">this</span>.makeLinearPath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'quadratic'</span> :
            p = <span class="hljs-keyword">this</span>.makeQuadraticPath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'bezier'</span> :
            p = <span class="hljs-keyword">this</span>.makeBezierPath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'oval'</span> :
            p = <span class="hljs-keyword">this</span>.makeOvalPath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'rectangle'</span> :
            p = <span class="hljs-keyword">this</span>.makeRectanglePath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'tetragon'</span> :
            p = <span class="hljs-keyword">this</span>.makeTetragonPath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'polygon'</span> :
            p = <span class="hljs-keyword">this</span>.makePolygonPath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'star'</span> :
            p = <span class="hljs-keyword">this</span>.makeStarPath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'radialshape'</span> :
            p = <span class="hljs-keyword">this</span>.makeRadialShapePath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'boxedshape'</span> :
            p = <span class="hljs-keyword">this</span>.makeBoxedShapePath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'polyline'</span> :
            p = <span class="hljs-keyword">this</span>.makePolylinePath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">'spiral'</span> :
            p = <span class="hljs-keyword">this</span>.makeSpiralPath();
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">default</span> :
            p = <span class="hljs-keyword">this</span>.pathDefinition;
    }
    <span class="hljs-keyword">this</span>.pathDefinition = p;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.draw = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">engine</span>) </span>{

    engine.stroke(<span class="hljs-keyword">this</span>.pathObject);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.showBoundingBox) <span class="hljs-keyword">this</span>.drawBoundingBox(engine);
},

P.fill = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">engine</span>) </span>{

    engine.fill(<span class="hljs-keyword">this</span>.pathObject, <span class="hljs-keyword">this</span>.winding);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.showBoundingBox) <span class="hljs-keyword">this</span>.drawBoundingBox(engine);
},

P.drawAndFill = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">engine</span>) </span>{

    <span class="hljs-keyword">let</span> p = <span class="hljs-keyword">this</span>.pathObject;

    engine.stroke(p);
    <span class="hljs-keyword">this</span>.currentHost.clearShadow();
    engine.fill(p, <span class="hljs-keyword">this</span>.winding);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.showBoundingBox) <span class="hljs-keyword">this</span>.drawBoundingBox(engine);
},

P.fillAndDraw = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">engine</span>) </span>{

    <span class="hljs-keyword">let</span> p = <span class="hljs-keyword">this</span>.pathObject;

    engine.stroke(p);
    <span class="hljs-keyword">this</span>.currentHost.clearShadow();
    engine.fill(p, <span class="hljs-keyword">this</span>.winding);
    engine.stroke(p);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.showBoundingBox) <span class="hljs-keyword">this</span>.drawBoundingBox(engine);
},

P.drawThenFill = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">engine</span>) </span>{

    <span class="hljs-keyword">let</span> p = <span class="hljs-keyword">this</span>.pathObject;

    engine.stroke(p);
    engine.fill(p, <span class="hljs-keyword">this</span>.winding);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.showBoundingBox) <span class="hljs-keyword">this</span>.drawBoundingBox(engine);
},

P.fillThenDraw = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">engine</span>) </span>{

    <span class="hljs-keyword">let</span> p = <span class="hljs-keyword">this</span>.pathObject;

    engine.fill(p, <span class="hljs-keyword">this</span>.winding);
    engine.stroke(p);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.showBoundingBox) <span class="hljs-keyword">this</span>.drawBoundingBox(engine);
},

P.clear = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">engine</span>) </span>{

    <span class="hljs-keyword">let</span> gco = engine.globalCompositeOperation;

    engine.globalCompositeOperation = <span class="hljs-string">'destination-out'</span>;
    engine.fill(<span class="hljs-keyword">this</span>.pathObject, <span class="hljs-keyword">this</span>.winding);
    
    engine.globalCompositeOperation = gco;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.showBoundingBox) <span class="hljs-keyword">this</span>.drawBoundingBox(engine);
},</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.drawBoundingBox = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">engine</span>) </span>{

    engine.save();

    engine.strokeStyle = <span class="hljs-keyword">this</span>.boundingBoxColor;
    engine.lineWidth = <span class="hljs-number">1</span>;
    engine.globalCompositeOperation = <span class="hljs-string">'source-over'</span>;
    engine.globalAlpha = <span class="hljs-number">1</span>;
    engine.shadowOffsetX = <span class="hljs-number">0</span>;
    engine.shadowOffsetY = <span class="hljs-number">0</span>;
    engine.shadowBlur = <span class="hljs-number">0</span>;

    engine.strokeRect(...this.getBoundingBox());

    engine.restore();
};</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.getBoundingBox = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">let</span> floor = <span class="hljs-built_in">Math</span>.floor,
        ceil = <span class="hljs-built_in">Math</span>.ceil,
        minDims = <span class="hljs-keyword">this</span>.minimumBoundingBoxDimensions;

    <span class="hljs-keyword">let</span> [x, y, w, h] = <span class="hljs-keyword">this</span>.localBox;
    <span class="hljs-keyword">let</span> [lx, ly] = <span class="hljs-keyword">this</span>.controlledLineOffset;
    <span class="hljs-keyword">let</span> [hX, hY] = <span class="hljs-keyword">this</span>.currentStampHandlePosition;
    <span class="hljs-keyword">let</span> [sX, sY] = <span class="hljs-keyword">this</span>.currentStampPosition;</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>Pad out excessively thin widths and heights</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (w &lt; minDims) w = minDims;
    <span class="hljs-keyword">if</span> (h &lt; minDims) h = minDims;

    <span class="hljs-keyword">return</span> [floor(x - hX + lx), floor(y - hY + ly), ceil(w), ceil(h), sX, sY];
};</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makeOvalPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">let</span> A = <span class="hljs-keyword">this</span>.offshootA,
        B = <span class="hljs-keyword">this</span>.offshootB,
        radiusX = <span class="hljs-keyword">this</span>.radiusX,
        radiusY = <span class="hljs-keyword">this</span>.radiusY,
        width, height;

    <span class="hljs-keyword">if</span> (radiusX.substring || radiusY.substring) {

        <span class="hljs-keyword">let</span> here = <span class="hljs-keyword">this</span>.getHere();

        <span class="hljs-keyword">let</span> rx = (radiusX.substring) ? (<span class="hljs-built_in">parseFloat</span>(radiusX) / <span class="hljs-number">100</span>) * here.w : radiusX,
            ry = (radiusY.substring) ? (<span class="hljs-built_in">parseFloat</span>(radiusY) / <span class="hljs-number">100</span>) * here.h : radiusY;

        width = rx * <span class="hljs-number">2</span>;
        height = ry * <span class="hljs-number">2</span>;
    }
    <span class="hljs-keyword">else</span> {

        width = radiusX * <span class="hljs-number">2</span>;
        height = radiusY * <span class="hljs-number">2</span>;
    }

    <span class="hljs-keyword">let</span> port = width * <span class="hljs-keyword">this</span>.intersectX,
        starboard = width - port,
        fore = height * <span class="hljs-keyword">this</span>.intersectY,
        aft = height - fore;

    <span class="hljs-keyword">let</span> myData = <span class="hljs-string">`m<span class="hljs-subst">${port}</span>,0`</span>;

    myData += <span class="hljs-string">`c<span class="hljs-subst">${starboard * A}</span>,<span class="hljs-subst">${fore * B}</span> <span class="hljs-subst">${starboard - (starboard * B)}</span>,<span class="hljs-subst">${fore - (fore * A)}</span>, <span class="hljs-subst">${starboard}</span>,<span class="hljs-subst">${fore}</span> `</span>;
    myData += <span class="hljs-string">`<span class="hljs-subst">${-starboard * B}</span>,<span class="hljs-subst">${aft * A}</span> <span class="hljs-subst">${-starboard + (starboard * A)}</span>,<span class="hljs-subst">${aft - (aft * B)}</span> <span class="hljs-subst">${-starboard}</span>,<span class="hljs-subst">${aft}</span> `</span>;
    myData += <span class="hljs-string">`<span class="hljs-subst">${-port * A}</span>,<span class="hljs-subst">${-aft * B}</span> <span class="hljs-subst">${-port + (port * B)}</span>,<span class="hljs-subst">${-aft + (aft * A)}</span> <span class="hljs-subst">${-port}</span>,<span class="hljs-subst">${-aft}</span> `</span>;
    myData += <span class="hljs-string">`<span class="hljs-subst">${port * B}</span>,<span class="hljs-subst">${-fore * A}</span> <span class="hljs-subst">${port - (port * A)}</span>,<span class="hljs-subst">${-fore + (fore * B)}</span> <span class="hljs-subst">${port}</span>,<span class="hljs-subst">${-fore}</span>z`</span>;

    <span class="hljs-keyword">return</span> myData;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makeTetragonPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">let</span> radiusX = <span class="hljs-keyword">this</span>.radiusX,
        radiusY = <span class="hljs-keyword">this</span>.radiusY,
        width, height;

    <span class="hljs-keyword">if</span> (radiusX.substring || radiusY.substring) {

        <span class="hljs-keyword">let</span> here = <span class="hljs-keyword">this</span>.getHere(),
            rx = (radiusX.substring) ? (<span class="hljs-built_in">parseFloat</span>(radiusX) / <span class="hljs-number">100</span>) * here.w : radiusX,
            ry = (radiusY.substring) ? (<span class="hljs-built_in">parseFloat</span>(radiusY) / <span class="hljs-number">100</span>) * here.h : radiusY;

        width = rx * <span class="hljs-number">2</span>;
        height = ry * <span class="hljs-number">2</span>;
    }
    <span class="hljs-keyword">else</span> {

        width = radiusX * <span class="hljs-number">2</span>;
        height = radiusY * <span class="hljs-number">2</span>;
    }

    <span class="hljs-keyword">let</span> port = width * <span class="hljs-keyword">this</span>.intersectX,
        starboard = width - port,
        fore = height * <span class="hljs-keyword">this</span>.intersectY,
        aft = height - fore;

    <span class="hljs-keyword">let</span> myData = <span class="hljs-string">`m<span class="hljs-subst">${port}</span>,0`</span>;

    myData += <span class="hljs-string">`l<span class="hljs-subst">${starboard}</span>,<span class="hljs-subst">${fore}</span> <span class="hljs-subst">${-starboard}</span>,<span class="hljs-subst">${aft}</span> <span class="hljs-subst">${-port}</span>,<span class="hljs-subst">${-aft}</span> <span class="hljs-subst">${port}</span>,<span class="hljs-subst">${-fore}</span>z`</span>;

    <span class="hljs-keyword">return</span> myData;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makeRectanglePath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">let</span> width = <span class="hljs-keyword">this</span>.rectangleWidth,
        height = <span class="hljs-keyword">this</span>.rectangleHeight;

    <span class="hljs-keyword">let</span> A = <span class="hljs-keyword">this</span>.offshootA,
        B = <span class="hljs-keyword">this</span>.offshootB;

    <span class="hljs-keyword">let</span> _tlx = <span class="hljs-keyword">this</span>.radiusTLX,
        _tly = <span class="hljs-keyword">this</span>.radiusTLY,
        _trx = <span class="hljs-keyword">this</span>.radiusTRX,
        _try = <span class="hljs-keyword">this</span>.radiusTRY,
        _brx = <span class="hljs-keyword">this</span>.radiusBRX,
        _bry = <span class="hljs-keyword">this</span>.radiusBRY,
        _blx = <span class="hljs-keyword">this</span>.radiusBLX,
        _bly = <span class="hljs-keyword">this</span>.radiusBLY;

    <span class="hljs-keyword">if</span> (_tlx.substring || _tly.substring || _trx.substring || _try.substring || _brx.substring || _bry.substring || _blx.substring || _bly.substring) {

        _tlx = (_tlx.substring) ? (<span class="hljs-built_in">parseFloat</span>(_tlx) / <span class="hljs-number">100</span>) * width : _tlx;
        _tly = (_tly.substring) ? (<span class="hljs-built_in">parseFloat</span>(_tly) / <span class="hljs-number">100</span>) * height : _tly;
        _trx = (_trx.substring) ? (<span class="hljs-built_in">parseFloat</span>(_trx) / <span class="hljs-number">100</span>) * width : _trx;
        _try = (_try.substring) ? (<span class="hljs-built_in">parseFloat</span>(_try) / <span class="hljs-number">100</span>) * height : _try;
        _brx = (_brx.substring) ? (<span class="hljs-built_in">parseFloat</span>(_brx) / <span class="hljs-number">100</span>) * width : _brx;
        _bry = (_bry.substring) ? (<span class="hljs-built_in">parseFloat</span>(_bry) / <span class="hljs-number">100</span>) * height : _bry;
        _blx = (_blx.substring) ? (<span class="hljs-built_in">parseFloat</span>(_blx) / <span class="hljs-number">100</span>) * width : _blx;
        _bly = (_bly.substring) ? (<span class="hljs-built_in">parseFloat</span>(_bly) / <span class="hljs-number">100</span>) * height : _bly;
    }

    <span class="hljs-keyword">let</span> myData = <span class="hljs-string">`m<span class="hljs-subst">${_tlx}</span>,0`</span>;

    <span class="hljs-keyword">if</span> (width - _tlx - _trx !== <span class="hljs-number">0</span>) myData += <span class="hljs-string">`h<span class="hljs-subst">${width - _tlx - _trx}</span>`</span>;

    <span class="hljs-keyword">if</span> (_trx + _try !== <span class="hljs-number">0</span>) myData += <span class="hljs-string">`c<span class="hljs-subst">${_trx * A}</span>,<span class="hljs-subst">${_try * B}</span> <span class="hljs-subst">${_trx - (_trx * B)}</span>,<span class="hljs-subst">${_try - (_try * A)}</span>, <span class="hljs-subst">${_trx}</span>,<span class="hljs-subst">${_try}</span>`</span>;
    
    <span class="hljs-keyword">if</span> (height - _try - _bry !== <span class="hljs-number">0</span>) myData += <span class="hljs-string">`v<span class="hljs-subst">${height - _try - _bry}</span>`</span>;
    
    <span class="hljs-keyword">if</span> (_brx + _bry !== <span class="hljs-number">0</span>) myData += <span class="hljs-string">`c<span class="hljs-subst">${-_brx * B}</span>,<span class="hljs-subst">${_bry * A}</span> <span class="hljs-subst">${-_brx + (_brx * A)}</span>,<span class="hljs-subst">${_bry - (_bry * B)}</span> <span class="hljs-subst">${-_brx}</span>,<span class="hljs-subst">${_bry}</span>`</span>;
    
    <span class="hljs-keyword">if</span> (-width + _blx + _brx !== <span class="hljs-number">0</span>) myData += <span class="hljs-string">`h<span class="hljs-subst">${-width + _blx + _brx}</span>`</span>;
    
    <span class="hljs-keyword">if</span> (_blx + _bly !== <span class="hljs-number">0</span>) myData += <span class="hljs-string">`c<span class="hljs-subst">${-_blx * A}</span>,<span class="hljs-subst">${-_bly * B}</span> <span class="hljs-subst">${-_blx + (_blx * B)}</span>,<span class="hljs-subst">${-_bly + (_bly * A)}</span> <span class="hljs-subst">${-_blx}</span>,<span class="hljs-subst">${-_bly}</span>`</span>;
    
    <span class="hljs-keyword">if</span> (-height + _tly + _bly !== <span class="hljs-number">0</span>) myData += <span class="hljs-string">`v<span class="hljs-subst">${-height + _tly + _bly}</span>`</span>;
    
    <span class="hljs-keyword">if</span> (_tlx + _tly !== <span class="hljs-number">0</span>) myData += <span class="hljs-string">`c<span class="hljs-subst">${_tlx * B}</span>,<span class="hljs-subst">${-_tly * A}</span> <span class="hljs-subst">${_tlx - (_tlx * A)}</span>,<span class="hljs-subst">${-_tly + (_tly * B)}</span> <span class="hljs-subst">${_tlx}</span>,<span class="hljs-subst">${-_tly}</span>`</span>;

    myData += <span class="hljs-string">'z'</span>;

    <span class="hljs-keyword">return</span> myData;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makeBezierPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    
    <span class="hljs-keyword">let</span> [startX, startY] = <span class="hljs-keyword">this</span>.currentStampPosition;
    <span class="hljs-keyword">let</span> [startControlX, startControlY] = <span class="hljs-keyword">this</span>.currentStartControl;
    <span class="hljs-keyword">let</span> [endControlX, endControlY] = <span class="hljs-keyword">this</span>.currentEndControl;
    <span class="hljs-keyword">let</span> [endX, endY] = <span class="hljs-keyword">this</span>.currentEnd;

    <span class="hljs-keyword">return</span> <span class="hljs-string">`m0,0c<span class="hljs-subst">${(startControlX - startX)}</span>,<span class="hljs-subst">${(startControlY - startY)}</span> <span class="hljs-subst">${(endControlX - startX)}</span>,<span class="hljs-subst">${(endControlY - startY)}</span> <span class="hljs-subst">${(endX - startX)}</span>,<span class="hljs-subst">${(endY - startY)}</span>`</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makeQuadraticPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    
    <span class="hljs-keyword">let</span> [startX, startY] = <span class="hljs-keyword">this</span>.currentStampPosition;
    <span class="hljs-keyword">let</span> [controlX, controlY] = <span class="hljs-keyword">this</span>.currentControl;
    <span class="hljs-keyword">let</span> [endX, endY] = <span class="hljs-keyword">this</span>.currentEnd;

    <span class="hljs-keyword">return</span> <span class="hljs-string">`m0,0q<span class="hljs-subst">${(controlX - startX)}</span>,<span class="hljs-subst">${(controlY - startY)}</span> <span class="hljs-subst">${(endX - startX)}</span>,<span class="hljs-subst">${(endY - startY)}</span>`</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makeLinearPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">let</span> [startX, startY] = <span class="hljs-keyword">this</span>.currentStampPosition;
    <span class="hljs-keyword">let</span> [endX, endY] = <span class="hljs-keyword">this</span>.currentEnd;

    <span class="hljs-keyword">return</span> <span class="hljs-string">`m0,0l<span class="hljs-subst">${(endX - startX)}</span>,<span class="hljs-subst">${(endY - startY)}</span>`</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makePolygonPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    
    <span class="hljs-keyword">let</span> sideLength = <span class="hljs-keyword">this</span>.sideLength,
        sides = <span class="hljs-keyword">this</span>.sides,
        turn = <span class="hljs-number">360</span> / sides,
        myPath = <span class="hljs-string">``</span>,
        yPts = [],
        currentY = <span class="hljs-number">0</span>,
        myMax, myMin, myYoffset;

    <span class="hljs-keyword">let</span> v = requestVector({<span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: -sideLength});

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; sides; i++) {

        v.rotate(turn);
        currentY += v.y;
        yPts.push(currentY);
        myPath += <span class="hljs-string">`<span class="hljs-subst">${v.x.toFixed(<span class="hljs-number">1</span>)}</span>,<span class="hljs-subst">${v.y.toFixed(<span class="hljs-number">1</span>)}</span> `</span>;
    }

    releaseVector(v);

    myMin = <span class="hljs-built_in">Math</span>.min(...yPts);
    myMax = <span class="hljs-built_in">Math</span>.max(...yPts);
    myYoffset = (((<span class="hljs-built_in">Math</span>.abs(myMin) + <span class="hljs-built_in">Math</span>.abs(myMax)) - sideLength) / <span class="hljs-number">2</span>).toFixed(<span class="hljs-number">1</span>);

    myPath = <span class="hljs-string">`m0,<span class="hljs-subst">${myYoffset}</span>l<span class="hljs-subst">${myPath}</span>z`</span>;

    <span class="hljs-keyword">return</span> myPath;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>TODO - documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makeStarPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    
    <span class="hljs-keyword">let</span> points = <span class="hljs-keyword">this</span>.points,
        twist = <span class="hljs-keyword">this</span>.twist,
        radius1 = <span class="hljs-keyword">this</span>.radius1,
        radius2 = <span class="hljs-keyword">this</span>.radius2,
        turn = <span class="hljs-number">360</span> / points,
        xPts = [],
        currentX, currentY, x, y,
        myMin, myXoffset, myYoffset, i,
        myPath = <span class="hljs-string">''</span>;

    <span class="hljs-keyword">let</span> v1 = requestVector({<span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: -radius1}),
        v2 = requestVector({<span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: -radius2});

    currentX = v1.x;
    currentY = v1.y;

    xPts.push(currentX);

    v2.rotate(-turn/<span class="hljs-number">2</span>);
    v2.rotate(twist);

    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; points; i++) {

        v2.rotate(turn);

        x = <span class="hljs-built_in">parseFloat</span>((v2.x - currentX).toFixed(<span class="hljs-number">1</span>));
        currentX += x;
        xPts.push(currentX);

        y = <span class="hljs-built_in">parseFloat</span>((v2.y - currentY).toFixed(<span class="hljs-number">1</span>));
        currentY += y;

        myPath += <span class="hljs-string">`<span class="hljs-subst">${x}</span>,<span class="hljs-subst">${y}</span> `</span>;

        v1.rotate(turn);

        x = <span class="hljs-built_in">parseFloat</span>((v1.x - currentX).toFixed(<span class="hljs-number">1</span>));
        currentX += x;
        xPts.push(currentX);

        y = <span class="hljs-built_in">parseFloat</span>((v1.y - currentY).toFixed(<span class="hljs-number">1</span>));
        currentY += y;

        myPath += <span class="hljs-string">`<span class="hljs-subst">${x}</span>,<span class="hljs-subst">${y}</span> `</span>;

    }

    releaseVector(v1);
    releaseVector(v2);

    myMin = <span class="hljs-built_in">Math</span>.min(...xPts);
    myXoffset = <span class="hljs-built_in">Math</span>.abs(myMin).toFixed(<span class="hljs-number">1</span>);

    myPath = <span class="hljs-string">`m<span class="hljs-subst">${myXoffset}</span>,0l<span class="hljs-subst">${myPath}</span>z`</span>;

    <span class="hljs-keyword">return</span> myPath;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>TODO: Use path and repeat arguments; functionality will be to: swivel the path around a central point ‘repeat’ number of times (angle = 360/repeat) and turn the resulting radial shape into a single path value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makeRadialShapePath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    
    <span class="hljs-keyword">let</span> a = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-string">`m0,0`</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>TODO: I’m a bit fuzzy about this one, but I want to somehow <em>box up</em> (relativize) other Shape paths with box width/height values which can then be manipulated - allowing us to stretch the Shape path to match its box dimensions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makeBoxedShapePath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    
    <span class="hljs-keyword">let</span> a = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-string">`m0,0`</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>TODO: A shape for freehand drawing. Should include a ‘points’ Array which could include [x,y] coordinates, or possibly any object containing x/y values (eg Vectors). The functionality would be to construct a long line (linear, possibly also quadratic for smoother lines) from the [points] data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makePolylinePath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    
    <span class="hljs-keyword">let</span> a = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-string">`m0,0`</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Taken from this page - <a href="https://rosettacode.org/wiki/Archimedean_spiral#JavaScript">https://rosettacode.org/wiki/Archimedean_spiral#JavaScript</a></p>

            </div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>TODO: find a solution that uses far fewer sub-units</p>
<ul>
<li>current solution uses lots of short lines</li>
<li>shoule be able to achieve the same effect using 4 bezier curves per turn</li>
<li>beziers would also offer a way to make much more interesting ‘spiral’ shapes </li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.makeSpiralPath = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    
    <span class="hljs-keyword">let</span> loops = <span class="hljs-keyword">this</span>.loops,
        loopIncrement = <span class="hljs-keyword">this</span>.loopIncrement,
        innerRadius = <span class="hljs-keyword">this</span>.innerRadius;

    <span class="hljs-keyword">let</span> myAngle = <span class="hljs-number">0</span>,
        angleIncrement = <span class="hljs-number">0.1</span>,
        angleSteps = loops * <span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI,
        steps = angleSteps / angleIncrement,
        xPts = [],
        yPts = [],
        x, y, minX, minY, maxX, maxY, i;

    <span class="hljs-keyword">let</span> currentX = innerRadius,
        currentY = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">let</span> myPath = <span class="hljs-string">`l`</span>;

    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; steps; i++) {

        x = innerRadius * <span class="hljs-built_in">Math</span>.cos(myAngle);
        y = innerRadius * <span class="hljs-built_in">Math</span>.sin(myAngle);

        myPath += <span class="hljs-string">`<span class="hljs-subst">${x - currentX}</span>,<span class="hljs-subst">${y - currentY}</span> `</span>;

        currentX = x; 
        currentY = y;

        xPts.push(currentX);
        yPts.push(currentY);

        innerRadius += loopIncrement; 
        myAngle += angleIncrement;
    }

    minX = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-built_in">Math</span>.min(...xPts));
    minY = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-built_in">Math</span>.min(...yPts));

    myPath = <span class="hljs-string">`m<span class="hljs-subst">${minX + <span class="hljs-keyword">this</span>.innerRadius}</span>,<span class="hljs-subst">${minY}</span><span class="hljs-subst">${myPath}</span>`</span>;

    <span class="hljs-keyword">return</span> myPath;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <h2 id="exported-factory-functions">Exported factory functions</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> makeShape = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items</span>) </span>{

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makeLine = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'line'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makeQuadratic = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'quadratic'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makeBezier = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'bezier'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makeRectangle = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'rectangle'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makeOval = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'oval'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makeTetragon = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'tetragon'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makePolygon = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'polygon'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makeStar = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'star'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makeRadialShape = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'radialshape'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makeBoxedShape = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'boxedshape'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makePolyline = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'polyline'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

<span class="hljs-keyword">const</span> makeSpiral = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

    items.species = <span class="hljs-string">'spiral'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Shape(items);
};

constructors.Shape = Shape;

<span class="hljs-keyword">export</span> {
    makeShape,

    makeLine,
    makeQuadratic,
    makeBezier,
    makeRectangle,
    makeOval,

    makeTetragon,
    makePolygon,
    makeStar,
    makeRadialShape,
    makeBoxedShape,
    makePolyline,
    makeSpiral
};</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
