<!DOCTYPE html>

<html>
<head>
  <title>Anchor mixin</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="../core/animationloop.html">
                  ./source/core/animationloop.js
                </a>
              
                
                <a class="source" href="../core/component.html">
                  ./source/core/component.js
                </a>
              
                
                <a class="source" href="../core/document.html">
                  ./source/core/document.js
                </a>
              
                
                <a class="source" href="../core/init.html">
                  ./source/core/init.js
                </a>
              
                
                <a class="source" href="../core/library.html">
                  ./source/core/library.js
                </a>
              
                
                <a class="source" href="../core/userInteraction.html">
                  ./source/core/userInteraction.js
                </a>
              
                
                <a class="source" href="../core/utilities.html">
                  ./source/core/utilities.js
                </a>
              
                
                <a class="source" href="../factory/action.html">
                  ./source/factory/action.js
                </a>
              
                
                <a class="source" href="../factory/anchor.html">
                  ./source/factory/anchor.js
                </a>
              
                
                <a class="source" href="../factory/animation.html">
                  ./source/factory/animation.js
                </a>
              
                
                <a class="source" href="../factory/block.html">
                  ./source/factory/block.js
                </a>
              
                
                <a class="source" href="../factory/canvas.html">
                  ./source/factory/canvas.js
                </a>
              
                
                <a class="source" href="../factory/cell.html">
                  ./source/factory/cell.js
                </a>
              
                
                <a class="source" href="../factory/color.html">
                  ./source/factory/color.js
                </a>
              
                
                <a class="source" href="../factory/coordinate.html">
                  ./source/factory/coordinate.js
                </a>
              
                
                <a class="source" href="../factory/element.html">
                  ./source/factory/element.js
                </a>
              
                
                <a class="source" href="../factory/filter.html">
                  ./source/factory/filter.js
                </a>
              
                
                <a class="source" href="../factory/fontAttributes.html">
                  ./source/factory/fontAttributes.js
                </a>
              
                
                <a class="source" href="../factory/gradient.html">
                  ./source/factory/gradient.js
                </a>
              
                
                <a class="source" href="../factory/grid.html">
                  ./source/factory/grid.js
                </a>
              
                
                <a class="source" href="../factory/group.html">
                  ./source/factory/group.js
                </a>
              
                
                <a class="source" href="../factory/imageAsset.html">
                  ./source/factory/imageAsset.js
                </a>
              
                
                <a class="source" href="../factory/loom.html">
                  ./source/factory/loom.js
                </a>
              
                
                <a class="source" href="../factory/palette.html">
                  ./source/factory/palette.js
                </a>
              
                
                <a class="source" href="../factory/pattern.html">
                  ./source/factory/pattern.js
                </a>
              
                
                <a class="source" href="../factory/phrase.html">
                  ./source/factory/phrase.js
                </a>
              
                
                <a class="source" href="../factory/picture.html">
                  ./source/factory/picture.js
                </a>
              
                
                <a class="source" href="../factory/quaternion.html">
                  ./source/factory/quaternion.js
                </a>
              
                
                <a class="source" href="../factory/radialGradient.html">
                  ./source/factory/radialGradient.js
                </a>
              
                
                <a class="source" href="../factory/renderAnimation.html">
                  ./source/factory/renderAnimation.js
                </a>
              
                
                <a class="source" href="../factory/shape.html">
                  ./source/factory/shape.js
                </a>
              
                
                <a class="source" href="../factory/spriteAsset.html">
                  ./source/factory/spriteAsset.js
                </a>
              
                
                <a class="source" href="../factory/stack.html">
                  ./source/factory/stack.js
                </a>
              
                
                <a class="source" href="../factory/state.html">
                  ./source/factory/state.js
                </a>
              
                
                <a class="source" href="../factory/ticker.html">
                  ./source/factory/ticker.js
                </a>
              
                
                <a class="source" href="../factory/tween.html">
                  ./source/factory/tween.js
                </a>
              
                
                <a class="source" href="../factory/unstackedElement.html">
                  ./source/factory/unstackedElement.js
                </a>
              
                
                <a class="source" href="../factory/vector.html">
                  ./source/factory/vector.js
                </a>
              
                
                <a class="source" href="../factory/videoAsset.html">
                  ./source/factory/videoAsset.js
                </a>
              
                
                <a class="source" href="../factory/wheel.html">
                  ./source/factory/wheel.js
                </a>
              
                
                <a class="source" href="anchor.html">
                  ./source/mixin/anchor.js
                </a>
              
                
                <a class="source" href="asset.html">
                  ./source/mixin/asset.js
                </a>
              
                
                <a class="source" href="assetConsumer.html">
                  ./source/mixin/assetConsumer.js
                </a>
              
                
                <a class="source" href="base.html">
                  ./source/mixin/base.js
                </a>
              
                
                <a class="source" href="cascade.html">
                  ./source/mixin/cascade.js
                </a>
              
                
                <a class="source" href="dom.html">
                  ./source/mixin/dom.js
                </a>
              
                
                <a class="source" href="entity.html">
                  ./source/mixin/entity.js
                </a>
              
                
                <a class="source" href="filter.html">
                  ./source/mixin/filter.js
                </a>
              
                
                <a class="source" href="position.html">
                  ./source/mixin/position.js
                </a>
              
                
                <a class="source" href="shapePathCalculation.html">
                  ./source/mixin/shapePathCalculation.js
                </a>
              
                
                <a class="source" href="styles.html">
                  ./source/mixin/styles.js
                </a>
              
                
                <a class="source" href="tween.html">
                  ./source/mixin/tween.js
                </a>
              
                
                <a class="source" href="../worker/filter.html">
                  ./source/worker/filter.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1 id="anchor-mixin">Anchor mixin</h1>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>This mixin adds functionality to artefacts, which allows them to act as an anchor - a link - to external URLs (eg web pages). </p>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>In Scrawl-canvas, an anchor object holds all the data and functionality required to turn an artefact into a link. That functionality gets defined in the factory file (./factory/anchor.js). This mixin makes it easy for the user to gain access to the anchor object via the artefact object.</p>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h3 id="examples-of-using-anchors">Examples of using anchors:</h3>

            </div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <pre><code><span class="hljs-comment">// get a handle on the canvas where the block/link will be defined </span>
<span class="hljs-comment">// (in this case a canvas with id="mycanvas")</span>
<span class="hljs-keyword">let</span> canvas = scrawl.library.artefact.mycanvas;
canvas.setAsCurrentCanvas();</code></pre>
            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <pre><code><span class="hljs-comment">// Define a block entity</span>
scrawl.makeBlock({</code></pre>
            </div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <pre><code>    name: <span class="hljs-string">'demo-anchor-block'</span>,</code></pre>
            </div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <pre><code>    width: <span class="hljs-string">'40%'</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-string">'40%'</span>,</code></pre>
            </div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <pre><code>    startX: <span class="hljs-string">'25%'</span>,
    <span class="hljs-attr">startY</span>: <span class="hljs-string">'25%'</span>,</code></pre>
            </div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <pre><code>    <span class="hljs-comment">// Define the anchor object's attributes</span>
    <span class="hljs-attr">anchor</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'wikipedia-water-link'</span>,
        <span class="hljs-attr">href</span>: <span class="hljs-string">'https://en.wikipedia.org/wiki/Water'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">'Link to the Wikipedia article on water (opens in new tab)'</span>,
    },</code></pre>
            </div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <pre><code>    <span class="hljs-comment">// Add an action to take when user clicks on the block entity</span>
    <span class="hljs-attr">onUp</span>: <span class="hljs-keyword">this</span>.clickAnchor,
});</code></pre>
            </div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <pre><code><span class="hljs-comment">// Add a listener to propagate DOM-detected click events on our canvas </span>
<span class="hljs-comment">// back into the Scrawl-canvas event system</span>
<span class="hljs-keyword">let</span> mylinks = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> canvas.cascadeEventAction(<span class="hljs-string">'up'</span>);
scrawl.addListener(<span class="hljs-string">'up'</span>, mylinks, canvas.domElement);</code></pre>
            </div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h2 id="imports">Imports</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> { canvas } <span class="hljs-keyword">from</span> <span class="hljs-string">'../core/library.js'</span>;
<span class="hljs-keyword">import</span> { mergeOver } <span class="hljs-keyword">from</span> <span class="hljs-string">'../core/utilities.js'</span>;
<span class="hljs-keyword">import</span> { makeAnchor } <span class="hljs-keyword">from</span> <span class="hljs-string">'../factory/anchor.js'</span>;
<span class="hljs-keyword">import</span> { scrawlNavigationHold } <span class="hljs-keyword">from</span> <span class="hljs-string">'../core/document.js'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">P = {}</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h2 id="define-attributes">Define attributes</h2>

            </div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>All factories using the anchor mixin will add these attributes to their prototype objects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">let</span> defaultAttributes = {</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Add an anchor attribute to the artefact - acts as a handle to the anchor object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        anchor: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>The mixin includes functionality to pass anchor-related attribute values through to its anchor object when the object is created or updated. Those attributes are stored in the anchor object, not the artefact object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    };
    P.defs = mergeOver(P.defs, defaultAttributes);</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <h2 id="define-getter-setter-and-deltasetter-functions">Define getter, setter and deltaSetter functions</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">let</span> G = P.getters,
        S = P.setters,
        D = P.deltaSetters;</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>These Get functions pass calls on the artefact object through to the artefact’s associated anchor object (if it exists). As all of the attributes are strings, the Get functions will return ‘’ strings if there is no anchor object currently assigned to the artefact.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    G.anchorDescription = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.anchor.get(<span class="hljs-string">'description'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    };
    G.anchorType = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.anchor.get(<span class="hljs-string">'type'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    };
    G.anchorTarget = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.anchor.get(<span class="hljs-string">'target'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    };
    G.anchorRel = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.anchor.get(<span class="hljs-string">'rel'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    };
    G.anchorReferrerPolicy = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.anchor.get(<span class="hljs-string">'referrerpolicy'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    };
    G.anchorPing = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.anchor.get(<span class="hljs-string">'ping'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    };
    G.anchorHreflang = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.anchor.get(<span class="hljs-string">'hreflang'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    };
    G.anchorHref = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.anchor.get(<span class="hljs-string">'href'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    };
    G.anchorDownload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.anchor.get(<span class="hljs-string">'download'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>The following attributes can be included in the object passed to the artefact’s set() function:</p>

            </div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <ul>
<li>anchorDescription</li>
<li>anchorType</li>
<li>anchorTarget</li>
<li>anchorRel</li>
<li>anchorReferrerPolicy</li>
<li>anchorPing</li>
<li>anchorHreflang</li>
<li>anchorHref (required if the anchor is to work as a URL link to external web pages)</li>
<li>anchorDownload</li>
<li>anchorFocusAction</li>
<li>anchorBlurAction</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Also, the artefact’s set() function can include a single <strong>anchor</strong> attribute, whose value should be an object containing some of the above attribute key:value pairs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    S.anchorDescription = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.setters.description(item);
    };
    S.anchorType = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.setters.anchorType(item);
    };
    S.anchorTarget = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.setters.target(item);
    };
    S.anchorRel = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.setters.rel(item);
    };
    S.anchorReferrerPolicy = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.setters.referrerpolicy(item);
    };
    S.anchorPing = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.setters.ping(item);
    };
    S.anchorHreflang = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.setters.hreflang(item);
    };
    S.anchorHref = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.setters.href(item);
    };
    S.anchorDownload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.setters.download(item);
    };

    S.anchorFocusAction = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.setters.focusAction(item);
    };

    S.anchorBlurAction = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.setters.blurAction(item);
    };

    S.anchor = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.buildAnchor(items);
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.anchor.set(items);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>These functions handle adding an anchor object to an artefact, or rebuilding it, or deleting it from the artefact. Each artifact can have a maximum of one anchor object associated with it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    P.buildAnchor = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items = {}</span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.demolish();

        <span class="hljs-keyword">if</span> (!items.name) items.name = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span>-anchor`</span>;
        <span class="hljs-keyword">if</span> (!items.description) items.description = <span class="hljs-string">`Anchor link for <span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> <span class="hljs-subst">${<span class="hljs-keyword">this</span>.type}</span>`</span>;

        items.host = <span class="hljs-keyword">this</span>;
        items.hold = <span class="hljs-keyword">this</span>.getAnchorHold();

        <span class="hljs-keyword">this</span>.anchor = makeAnchor(items);
    };

    P.getAnchorHold = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">let</span> entityHost = <span class="hljs-keyword">this</span>.currentHost;

        <span class="hljs-keyword">if</span> (entityHost) {

            <span class="hljs-keyword">if</span> (entityHost.type === <span class="hljs-string">'Canvas'</span>) <span class="hljs-keyword">return</span> entityHost.navigation;

            <span class="hljs-keyword">if</span> (entityHost.type === <span class="hljs-string">'Cell'</span>) {

                <span class="hljs-keyword">let</span> cellHost = (entityHost.currentHost) ? entityHost.currentHost : canvas[entityHost.host];

                <span class="hljs-keyword">if</span> (cellHost &amp;&amp; cellHost.type === <span class="hljs-string">'Canvas'</span>) <span class="hljs-keyword">return</span> cellHost.navigation;
            }
        }
        <span class="hljs-keyword">this</span>.dirtyAnchorHold = <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">return</span> scrawlNavigationHold;
    }

    P.rebuildAnchor = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.build();
    };

    P.demolishAnchor = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.demolish();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Function to pass a user click (or whatever event has been set up) on the artefact through to the anchor object, for action.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    P.clickAnchor = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.anchor) <span class="hljs-keyword">this</span>.anchor.click();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Return the prototype</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> P;
};</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
